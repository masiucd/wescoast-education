(()=>{"use strict";var t,e,n=function(t){var e=t.id,n=t.firstName,i=t.lastName,a=t.email,o=t.age,r=t.type;return{id:e,firstName:n,lastName:i,email:a,age:o,type:r,showCase:function(){return{name:n+" "+i,email:a,age:""+o}}}},i=[n({id:1,firstName:"mark",lastName:"smith",email:"mark@io.com",age:37,type:"t"}),n({id:2,firstName:"george",lastName:"pierre",email:"pierre@io.com",age:48,type:"t"}),n({id:3,firstName:"carl",lastName:"carl",email:"carl@io.com",age:36,type:"t"}),n({id:4,firstName:"bob",lastName:"rooney",email:"bob@io.com",age:31,type:"t"})],a=function(t,e,n,i){var a=function(){return'   \n    <div class="table-wrapper wrapper-'+n+'">\n    <table class="'+n+'">\n        <caption>'+n+"</caption>\n        <thead>\n          "+i.map((function(t){return"<th>"+t+"</th>"})).join("")+"\n        </thead>\n        <tbody>\n          "+e.map((function(t){var e=t.showCase();return'\n                <tr data-id="'+t.id+'" id="'+("s"===t.type?"student-"+t.id:"t"===t.type?"teacher-"+t.id:"course-"+t.id)+'">\n                '+Object.keys(e).map((function(t){return'<td data-info="'+e[t]+'">'+e[t]+"</td>"})).join("")+"\n                </tr>\n          "})).join("")+"\n        </tbody>\n      </table>\n    </div>\n    "};return{init:function(){t.innerHTML=a()},rawHtml:a,onClick:function(t){document.querySelectorAll("tr").forEach((function(e){return e.addEventListener("click",(function(){"student"===e.id.split("-")[0]&&t(parseInt(e.dataset.id,10))}))}))}}},o=function(t,e,n,i){return{id:t,title:e,about:n,duration:i,showCase:function(){return{title:e,duration:i}}}},r=[o(1,"french","french class","5h"),o(2,"history","history class","3h"),o(3,"math","math class","4h"),o(4,"english","english class","3h")],s=function(t){var e=t.id,n=t.firstName,i=t.lastName,a=t.email,o=t.age,r=t.type;return{id:e,firstName:n,lastName:i,email:a,age:o,type:r,showCase:function(){return{name:n+" "+i,email:a,age:""+o}}}},c=[s({id:1,firstName:"bob",lastName:"smith",email:"bob@io.com",age:17,type:"s"}),s({id:2,firstName:"joe",lastName:"jonsson",email:"joe@io.com",age:18,type:"s"}),s({id:3,firstName:"philip",lastName:"oconnor",email:"ph@io.com",age:16,type:"s"}),s({id:4,firstName:"anna",lastName:"franklin",email:"anna@io.com",age:21,type:"s"})],m=new(function(){function t(){this.collection={},this.messages=[]}return t.prototype.register=function(t){this.collection[t.name]=t,t.adminMediator=this},t.prototype.send=function(t,e){this.messages.push({message:t,from:e})},t}()),l=function(){function t(t){this.name=t,this.adminMediator=null}return t.prototype.send=function(t){var e;null===(e=this.adminMediator)||void 0===e||e.send(t,this)},t}(),d=function(t,e,n,i,o){var r=a(t,n,i,o);return{init:function(){!function(){var n;t.classList.add("show-modal");var i='\n    <div class="modal-container">\n      '+r.rawHtml()+'\n      <button class="close-modal">\n        ‚ùå\n      </button>\n    </div>\n    ';t.innerHTML=i,null===(n=document.querySelector(".close-modal"))||void 0===n||n.addEventListener("click",(function(){t.classList.remove("show-modal")}));var a=new l(e.firstName);m.register(a);var o=document.querySelectorAll(".modal tbody tr td");Array.from(o).forEach((function(t){var n=t.dataset.info;"english"!==n&&"french"!==n&&"history"!==n&&"math"!==n||t.addEventListener("click",(function(t){a.send("Student "+e.firstName+" "+e.lastName+" has been registered for the course "+n),console.log(m)}))}))}()}}};(function(t){void 0===t&&(t=document.querySelector(".main"));var e=a(t,c,"students",["name","email","age"]),n=function(t){var e=c.find((function(e){return e.id===t})),n=document.querySelector(".modal");d(n,e,r,"courses",["title","duration"]).init()};return{init:function(){e.init(),e.onClick(n)}}})(document.getElementById("students")).init(),(t=document.getElementById("teachers"),e=a(t,i,"teachers",["name","email","age"]),{init:function(){e.init()}}).init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy93ZXNjb2FzdDMuMC9tb2RlbHMvdGVhY2hlci50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy93ZXNjb2FzdDMuMC9jb250cm9sbGVycy90ZWFjaGVyLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3dlc2NvYXN0My4wL3ZpZXdzL2xpc3Qtdmlldy50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy93ZXNjb2FzdDMuMC9tb2RlbHMvY291cnNlLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3dlc2NvYXN0My4wL21vZGVscy9zdHVkZW50LnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3dlc2NvYXN0My4wL21lZGlhdG9yL21haW4udHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvd2VzY29hc3QzLjAvbWVkaWF0b3Ivc2VydmljZS50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy93ZXNjb2FzdDMuMC92aWV3cy9tb2RhbC12aWV3LnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3dlc2NvYXN0My4wL2NvbnRyb2xsZXJzL3N0dWRlbnQudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsicGFyZW50RWxlbWVudCIsInZpZXciLCJ0ZWFjaGVyIiwiaWQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwiYWdlIiwidHlwZSIsInNob3dDYXNlIiwibmFtZSIsInRlYWNoZXJzIiwibGlzdFZpZXciLCJ4cyIsInRpdGxlIiwic3ViVGl0bGVzIiwicmF3SHRtbCIsIm1hcCIsInQiLCJqb2luIiwiZGF0YSIsIk9iamVjdCIsImtleXMiLCJrZXkiLCJpbml0IiwiaW5uZXJIVE1MIiwib25DbGljayIsImhhbmRsZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwidHIiLCJhZGRFdmVudExpc3RlbmVyIiwic3BsaXQiLCJwYXJzZUludCIsImRhdGFzZXQiLCJjb3Vyc2UiLCJhYm91dCIsImR1cmF0aW9uIiwiY291cnNlcyIsInN0dWRlbnQiLCJzdHVkZW50cyIsImFkbWluTWVkaWF0b3IiLCJ0aGlzIiwiY29sbGVjdGlvbiIsIm1lc3NhZ2VzIiwicmVnaXN0ZXIiLCJzZXJ2aWNlIiwic2VuZCIsIm1lc3NhZ2UiLCJmcm9tIiwicHVzaCIsIm1vZGFsVmlldyIsInBlcnNvbiIsImNsYXNzTGlzdCIsImFkZCIsImh0bWwiLCJxdWVyeVNlbGVjdG9yIiwicmVtb3ZlIiwic3R1ZGVudFNlcnZpY2UiLCJTZXJ2aWNlIiwidGRzIiwiQXJyYXkiLCJ0ZCIsImluZm8iLCJldmVudCIsImNvbnNvbGUiLCJsb2ciLCJyZW5kZXIiLCJnZXRTdHVkZW50IiwiZmluZCIsIm1vZGFsIiwic3R1ZGVudENvbnRyb2xsZXIiLCJnZXRFbGVtZW50QnlJZCJdLCJtYXBwaW5ncyI6Im1CQUVBLElDQzJCQSxFQUNuQkMsRURGRkMsRUFBVSxTQUFDLEcsSUFBRUMsRUFBRSxLQUFFQyxFQUFTLFlBQUVDLEVBQVEsV0FBRUMsRUFBSyxRQUFFQyxFQUFHLE1BQUVDLEVBQUksT0FTMUQsTUFBTyxDQUNMTCxHQUFFLEVBQ0ZDLFVBQVMsRUFDVEMsU0FBUSxFQUNSQyxNQUFLLEVBQ0xDLElBQUcsRUFDSEMsS0FBSSxFQUNKQyxTQWZlLFdBQ2YsTUFBTyxDQUNMQyxLQUFTTixFQUFTLElBQUlDLEVBQ3RCQyxNQUFLLEVBQ0xDLElBQUssR0FBR0EsTUFlUkksRUFBVyxDQUNmVCxFQUFRLENBQUVDLEdBQUksRUFBR0MsVUFBVyxPQUFRQyxTQUFVLFFBQVNDLE1BQU8sY0FBZUMsSUFBSyxHQUFJQyxLQUFNLE1BQzVGTixFQUFRLENBQUVDLEdBQUksRUFBR0MsVUFBVyxTQUFVQyxTQUFVLFNBQVVDLE1BQU8sZ0JBQWlCQyxJQUFLLEdBQUlDLEtBQU0sTUFDakdOLEVBQVEsQ0FBRUMsR0FBSSxF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Q0FBQyxPQUFRLFFBQVMsUUFNdkU0QixFQUFhLFNBQUNsRSxHQUNsQixJQUFNcUMsRUFBVUMsRUFBUzZCLE1BQUssU0FBQTlCLEdBQVcsT0FBQUEsRUFBUXJDLEtBQU9BLEtBQ2xEb0UsRUFBUTNDLFNBQVM2QixjQUFjLFVBQ3JDTCxFQUFVbUIsRUFBTy9CLEVBQVNELEVBQVMsVUFBVyxDQUFDLFFBQVMsYUFBYWYsUUFZdkUsTUFBTyxDQUNMQSxLQU5XLFdBYlh2QixFQUFLdUIsT0FVTHZCLEVBQUt5QixRQUFRMkMsTUNuQmZHLENBQWtCNUMsU0FBUzZDLGVBQWUsYUFBK0JqRCxRUkFoRHhCLEVRQ1A0QixTQUFTNkMsZUFBZSxZUkFwQ3hFLEVBQU9XLEVBQVNaLEVBQWVXLEVBQVUsV0FBWSxDQUFDLE9BQVEsUUFBUyxRQVN0RSxDQUNMYSxLQUpXLFdBSFh2QixFQUFLdUIsVVFIa0VBLFEiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGVyc29uIH0gZnJvbSBcIi4uL3R5cGVzXCJcblxuY29uc3QgdGVhY2hlciA9ICh7IGlkLCBmaXJzdE5hbWUsIGxhc3ROYW1lLCBlbWFpbCwgYWdlLCB0eXBlIH06IFBlcnNvbikgPT4ge1xuICBjb25zdCBzaG93Q2FzZSA9ICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogYCR7Zmlyc3ROYW1lfSAke2xhc3ROYW1lfWAsXG4gICAgICBlbWFpbCxcbiAgICAgIGFnZTogYCR7YWdlfWAsXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpZCxcbiAgICBmaXJzdE5hbWUsXG4gICAgbGFzdE5hbWUsXG4gICAgZW1haWwsXG4gICAgYWdlLFxuICAgIHR5cGUsXG4gICAgc2hvd0Nhc2UsXG4gIH1cbn1cblxuY29uc3QgdGVhY2hlcnMgPSBbXG4gIHRlYWNoZXIoeyBpZDogMSwgZmlyc3ROYW1lOiBcIm1hcmtcIiwgbGFzdE5hbWU6IFwic21pdGhcIiwgZW1haWw6IFwibWFya0Bpby5jb21cIiwgYWdlOiAzNywgdHlwZTogXCJ0XCIgfSksXG4gIHRlYWNoZXIoeyBpZDogMiwgZmlyc3ROYW1lOiBcImdlb3JnZVwiLCBsYXN0TmFtZTogXCJwaWVycmVcIiwgZW1haWw6IFwicGllcnJlQGlvLmNvbVwiLCBhZ2U6IDQ4LCB0eXBlOiBcInRcIiB9KSxcbiAgdGVhY2hlcih7IGlkOiAzLCBmaXJzdE5hbWU6IFwiY2FybFwiLCBsYXN0TmFtZTogXCJjYXJsXCIsIGVtYWlsOiBcImNhcmxAaW8uY29tXCIsIGFnZTogMzYsIHR5cGU6IFwidFwiIH0pLFxuICB0ZWFjaGVyKHsgaWQ6IDQsIGZpcnN0TmFtZTogXCJib2JcIiwgbGFzdE5hbWU6IFwicm9vbmV5XCIsIGVtYWlsOiBcImJvYkBpby5jb21cIiwgYWdlOiAzMSwgdHlwZTogXCJ0XCIgfSksXG5dXG5cbnR5cGUgVGVhY2hlciA9IHR5cGVvZiB0ZWFjaGVyXG5cbmV4cG9ydCB7IHRlYWNoZXIsIHRlYWNoZXJzLCBUZWFjaGVyIH1cbiIsImltcG9ydCB7IHRlYWNoZXJzIH0gZnJvbSBcIi4uL21vZGVscy90ZWFjaGVyXCJcbmltcG9ydCB7IGxpc3RWaWV3IH0gZnJvbSBcIi4uL3ZpZXdzL2xpc3Qtdmlld1wiXG5cbmNvbnN0IHRlYWNoZXJDb250cm9sbGVyID0gKHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50KSA9PiB7XG4gIGNvbnN0IHZpZXcgPSBsaXN0VmlldyhwYXJlbnRFbGVtZW50LCB0ZWFjaGVycywgXCJ0ZWFjaGVyc1wiLCBbXCJuYW1lXCIsIFwiZW1haWxcIiwgXCJhZ2VcIl0pXG5cbiAgY29uc3QgcmVuZGVyID0gKCkgPT4ge1xuICAgIHZpZXcuaW5pdCgpXG4gIH1cblxuICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgIHJlbmRlcigpXG4gIH1cbiAgcmV0dXJuIHtcbiAgICBpbml0LFxuICB9XG59XG5cbmV4cG9ydCB7IHRlYWNoZXJDb250cm9sbGVyIH1cbiIsImNvbnN0IGxpc3RWaWV3ID0gPFQ+KHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LCB4czogVFtdLCB0aXRsZTogc3RyaW5nLCBzdWJUaXRsZXM6IHN0cmluZ1tdKSA9PiB7XG4gIGNvbnN0IHJhd0h0bWwgPSAoKSA9PlxuICAgIGAgICBcbiAgICA8ZGl2IGNsYXNzPVwidGFibGUtd3JhcHBlciB3cmFwcGVyLSR7dGl0bGV9XCI+XG4gICAgPHRhYmxlIGNsYXNzPVwiJHt0aXRsZX1cIj5cbiAgICAgICAgPGNhcHRpb24+JHt0aXRsZX08L2NhcHRpb24+XG4gICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAke3N1YlRpdGxlcy5tYXAodCA9PiBgPHRoPiR7dH08L3RoPmApLmpvaW4oXCJcIil9XG4gICAgICAgIDwvdGhlYWQ+XG4gICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAke3hzXG4gICAgICAgICAgICAubWFwKChkYXRhOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgY29uc3Qgc2hvd0Nhc2UgPSBkYXRhLnNob3dDYXNlKClcbiAgICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgICAgICA8dHIgZGF0YS1pZD1cIiR7ZGF0YS5pZH1cIiBpZD1cIiR7XG4gICAgICAgICAgICAgICAgZGF0YS50eXBlID09PSBcInNcIlxuICAgICAgICAgICAgICAgICAgPyBgc3R1ZGVudC0ke2RhdGEuaWR9YFxuICAgICAgICAgICAgICAgICAgOiBkYXRhLnR5cGUgPT09IFwidFwiXG4gICAgICAgICAgICAgICAgICA/IGB0ZWFjaGVyLSR7ZGF0YS5pZH1gXG4gICAgICAgICAgICAgICAgICA6IGBjb3Vyc2UtJHtkYXRhLmlkfWBcbiAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgICAgICR7T2JqZWN0LmtleXMoc2hvd0Nhc2UpXG4gICAgICAgICAgICAgICAgICAubWFwKGtleSA9PiBgPHRkIGRhdGEtaW5mbz1cIiR7c2hvd0Nhc2Vba2V5XX1cIj4ke3Nob3dDYXNlW2tleV19PC90ZD5gKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCJcIil9XG4gICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICBgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oXCJcIil9XG4gICAgICAgIDwvdGJvZHk+XG4gICAgICA8L3RhYmxlPlxuICAgIDwvZGl2PlxuICAgIGBcblxuICBjb25zdCByZW5kZXIgPSAoKSA9PiB7XG4gICAgcGFyZW50RWxlbWVudC5pbm5lckhUTUwgPSByYXdIdG1sKClcbiAgfVxuXG4gIGNvbnN0IG9uQ2xpY2sgPSAoaGFuZGxlcjogRnVuY3Rpb24pID0+IHtcbiAgICBjb25zdCB0cnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwidHJcIilcbiAgICB0cnMuZm9yRWFjaCh0ciA9PlxuICAgICAgdHIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgW3R5cGVdID0gdHIuaWQuc3BsaXQoXCItXCIpXG4gICAgICAgIGlmICh0eXBlID09PSBcInN0dWRlbnRcIikge1xuICAgICAgICAgIGhhbmRsZXIocGFyc2VJbnQodHIuZGF0YXNldC5pZCEsIDEwKSlcbiAgICAgICAgfVxuICAgICAgICAvLyBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwidXNlclwiLCBTdHJpbmcodHIuZGF0YXNldC5pZCkpXG4gICAgICB9KVxuICAgIClcbiAgfVxuXG4gIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgcmVuZGVyKClcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaW5pdCxcbiAgICByYXdIdG1sLFxuICAgIG9uQ2xpY2ssXG4gIH1cbn1cblxuZXhwb3J0IHsgbGlzdFZpZXcgfVxuIiwiaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gXCIuLi90eXBlc1wiXG5cbmNvbnN0IGNvdXJzZSA9IChpZDogbnVtYmVyLCB0aXRsZTogU3ViamVjdCwgYWJvdXQ6IHN0cmluZywgZHVyYXRpb246IHN0cmluZykgPT4ge1xuICBjb25zdCBzaG93Q2FzZSA9ICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGUsXG4gICAgICBkdXJhdGlvbixcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGlkLFxuICAgIHRpdGxlLFxuICAgIGFib3V0LFxuICAgIGR1cmF0aW9uLFxuICAgIHNob3dDYXNlLFxuICB9XG59XG5cbnR5cGUgQ291cnNlVHlwZSA9IHR5cGVvZiBjb3Vyc2VcblxuY29uc3QgY291cnNlcyA9IFtcbiAgY291cnNlKDEsIFwiZnJlbmNoXCIsIFwiZnJlbmNoIGNsYXNzXCIsIFwiNWhcIiksXG4gIGNvdXJzZSgyLCBcImhpc3RvcnlcIiwgXCJoaXN0b3J5IGNsYXNzXCIsIFwiM2hcIiksXG4gIGNvdXJzZSgzLCBcIm1hdGhcIiwgXCJtYXRoIGNsYXNzXCIsIFwiNGhcIiksXG4gIGNvdXJzZSg0LCBcImVuZ2xpc2hcIiwgXCJlbmdsaXNoIGNsYXNzXCIsIFwiM2hcIiksXG5dXG5cbmV4cG9ydCB7IGNvdXJzZSwgY291cnNlcywgQ291cnNlVHlwZSB9XG4iLCJpbXBvcnQgeyBQZXJzb24gfSBmcm9tIFwiLi4vdHlwZXNcIlxuXG5jb25zdCBzdHVkZW50ID0gKHsgaWQsIGZpcnN0TmFtZSwgbGFzdE5hbWUsIGVtYWlsLCBhZ2UsIHR5cGUgfTogUGVyc29uKSA9PiB7XG4gIGNvbnN0IHNob3dDYXNlID0gKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBgJHtmaXJzdE5hbWV9ICR7bGFzdE5hbWV9YCxcbiAgICAgIGVtYWlsLFxuICAgICAgYWdlOiBgJHthZ2V9YCxcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGlkLFxuICAgIGZpcnN0TmFtZSxcbiAgICBsYXN0TmFtZSxcbiAgICBlbWFpbCxcbiAgICBhZ2UsXG4gICAgdHlwZSxcbiAgICBzaG93Q2FzZSxcbiAgfVxufVxuXG50eXBlIFN0dWRlbnQgPSB0eXBlb2Ygc3R1ZGVudFxuY29uc3Qgc3R1ZGVudHMgPSBbXG4gIHN0dWRlbnQoeyBpZDogMSwgZmlyc3ROYW1lOiBcImJvYlwiLCBsYXN0TmFtZTogXCJzbWl0aFwiLCBlbWFpbDogXCJib2JAaW8uY29tXCIsIGFnZTogMTcsIHR5cGU6IFwic1wiIH0pLFxuICBzdHVkZW50KHsgaWQ6IDIsIGZpcnN0TmFtZTogXCJqb2VcIiwgbGFzdE5hbWU6IFwiam9uc3NvblwiLCBlbWFpbDogXCJqb2VAaW8uY29tXCIsIGFnZTogMTgsIHR5cGU6IFwic1wiIH0pLFxuICBzdHVkZW50KHsgaWQ6IDMsIGZpcnN0TmFtZTogXCJwaGlsaXBcIiwgbGFzdE5hbWU6IFwib2Nvbm5vclwiLCBlbWFpbDogXCJwaEBpby5jb21cIiwgYWdlOiAxNiwgdHlwZTogXCJzXCIgfSksXG4gIHN0dWRlbnQoeyBpZDogNCwgZmlyc3ROYW1lOiBcImFubmFcIiwgbGFzdE5hbWU6IFwiZnJhbmtsaW5cIiwgZW1haWw6IFwiYW5uYUBpby5jb21cIiwgYWdlOiAyMSwgdHlwZTogXCJzXCIgfSksXG5dXG5cbmV4cG9ydCB7IHN0dWRlbnQsIHN0dWRlbnRzLCBTdHVkZW50IH1cbiIsImltcG9ydCB7IFNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCJcblxuZXhwb3J0IGNsYXNzIEFkbWluTWVkaWF0b3Ige1xuICBjb2xsZWN0aW9uOiBSZWNvcmQ8c3RyaW5nLCBTZXJ2aWNlPlxuICBtZXNzYWdlczogYW55W11cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb2xsZWN0aW9uID0ge31cbiAgICB0aGlzLm1lc3NhZ2VzID0gW11cbiAgfVxuICByZWdpc3RlcihzZXJ2aWNlOiBTZXJ2aWNlKSB7XG4gICAgdGhpcy5jb2xsZWN0aW9uW3NlcnZpY2UubmFtZV0gPSBzZXJ2aWNlXG4gICAgc2VydmljZS5hZG1pbk1lZGlhdG9yID0gdGhpc1xuICB9XG5cbiAgc2VuZChtZXNzYWdlOiBzdHJpbmcsIGZyb206IGFueSkge1xuICAgIHRoaXMubWVzc2FnZXMucHVzaCh7IG1lc3NhZ2UsIGZyb20gfSlcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgYWRtaW5NZWRpYXRvciA9IG5ldyBBZG1pbk1lZGlhdG9yKClcbiIsImltcG9ydCB7IEFkbWluTWVkaWF0b3IgfSBmcm9tIFwiLi9tYWluXCJcblxuY2xhc3MgU2VydmljZSB7XG4gIG5hbWU6IHN0cmluZ1xuICBhZG1pbk1lZGlhdG9yOiBBZG1pbk1lZGlhdG9yIHwgbnVsbFxuXG4gIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZykge1xuICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICB0aGlzLmFkbWluTWVkaWF0b3IgPSBudWxsXG4gIH1cblxuICBzZW5kKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHRoaXMuYWRtaW5NZWRpYXRvcj8uc2VuZChtZXNzYWdlLCB0aGlzKVxuICB9XG59XG5cbmV4cG9ydCB7IFNlcnZpY2UgfVxuIiwiaW1wb3J0IHsgYWRtaW5NZWRpYXRvciB9IGZyb20gXCIuLi9tZWRpYXRvci9tYWluXCJcbmltcG9ydCB7IFNlcnZpY2UgfSBmcm9tIFwiLi4vbWVkaWF0b3Ivc2VydmljZVwiXG5pbXBvcnQgeyBQZXJzb24sIFN1YmplY3QgfSBmcm9tIFwiLi4vdHlwZXNcIlxuaW1wb3J0IHsgbGlzdFZpZXcgfSBmcm9tIFwiLi9saXN0LXZpZXdcIlxuXG5leHBvcnQgaW50ZXJmYWNlIExpc3RlbmVyPFQ+IHtcbiAgZXZlbnQ6IHsgdGFyZ2V0OiBUIH1cbn1cblxuY29uc3QgbW9kYWxWaWV3ID0gPFQ+KFxuICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudCxcbiAgcGVyc29uOiBQZXJzb24sXG4gIHhzOiBUW10sXG4gIHRpdGxlOiBzdHJpbmcsXG4gIHN1YlRpdGxlczogc3RyaW5nW11cbikgPT4ge1xuICBjb25zdCB2aWV3ID0gbGlzdFZpZXcocGFyZW50RWxlbWVudCwgeHMsIHRpdGxlLCBzdWJUaXRsZXMpXG5cbiAgY29uc3QgdXBkYXRlQWRtaW5NZWRpYXRvciA9ICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhhZG1pbk1lZGlhdG9yKVxuICB9XG5cbiAgY29uc3QgcmVuZGVyID0gKCkgPT4ge1xuICAgIHBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNob3ctbW9kYWxcIilcbiAgICBjb25zdCBodG1sID0gYFxuICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250YWluZXJcIj5cbiAgICAgICR7dmlldy5yYXdIdG1sKCl9XG4gICAgICA8YnV0dG9uIGNsYXNzPVwiY2xvc2UtbW9kYWxcIj5cbiAgICAgICAg4p2MXG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgICBgXG4gICAgcGFyZW50RWxlbWVudC5pbm5lckhUTUwgPSBodG1sXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZS1tb2RhbFwiKT8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInNob3ctbW9kYWxcIilcbiAgICB9KVxuICAgIGNvbnN0IHN0dWRlbnRTZXJ2aWNlID0gbmV3IFNlcnZpY2UocGVyc29uLmZpcnN0TmFtZSlcbiAgICBhZG1pbk1lZGlhdG9yLnJlZ2lzdGVyKHN0dWRlbnRTZXJ2aWNlKVxuICAgIGNvbnN0IHRkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWwgdGJvZHkgdHIgdGRcIikgYXMgTm9kZUxpc3RcblxuICAgIEFycmF5LmZyb20odGRzKS5mb3JFYWNoKHRkID0+IHtcbiAgICAgIGNvbnN0IHRkRWxlbWVudCA9IHRkIGFzIEhUTUxFbGVtZW50XG4gICAgICBjb25zdCBpbmZvID0gdGRFbGVtZW50LmRhdGFzZXQuaW5mbyBhcyBTdWJqZWN0XG5cbiAgICAgIGlmIChpbmZvID09PSBcImVuZ2xpc2hcIiB8fCBpbmZvID09PSBcImZyZW5jaFwiIHx8IGluZm8gPT09IFwiaGlzdG9yeVwiIHx8IGluZm8gPT09IFwibWF0aFwiKSB7XG4gICAgICAgIHRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgICAgIHN0dWRlbnRTZXJ2aWNlLnNlbmQoXG4gICAgICAgICAgICBgU3R1ZGVudCAke3BlcnNvbi5maXJzdE5hbWV9ICR7cGVyc29uLmxhc3ROYW1lfSBoYXMgYmVlbiByZWdpc3RlcmVkIGZvciB0aGUgY291cnNlICR7aW5mb31gXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgdXBkYXRlQWRtaW5NZWRpYXRvcigpXG4gICAgICAgICAgLy8gaWYgKFwic2VuZFwiIGluIHRoaXMuZGF0YSkge1xuICAgICAgICAgIC8vICAgY29uc3QgY29uZmlybWF0aW9uVGV4dCA9IGBZb3UgaGF2ZSBub3cgYmVlbiByZWdpc3RlcmVkIHRvIHRoZSAke2V2ZW50LnRhcmdldC5pbm5lclRleHR9IENvdXJzZWBcbiAgICAgICAgICAvLyAgIHRoaXMuZGF0YS5zZW5kKGNvbmZpcm1hdGlvblRleHQsIHRoaXMuYWRtaW4pIC8vIHNlbmRpbmcgZnJvbSB0aGlzIHN0dWRlbnQsIHRvIGl0c2VsZiBhbmQgdG8gYWRtaW5cbiAgICAgICAgICAvLyAgIHRoaXMudXBkYXRlVGV4dChjb25maXJtYXRpb25UZXh0KVxuICAgICAgICAgIC8vICAgY29uc29sZS5sb2codGhpcy5hZG1pbi5hZG1pbk1lZGlhdG9yPy5tZW1iZXJzKVxuICAgICAgICAgIC8vICAgdGhpcy51cGRhdGVIdG1sKClcbiAgICAgICAgICAvLyB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgcmVuZGVyKClcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaW5pdCxcbiAgfVxufVxuXG5leHBvcnQgeyBtb2RhbFZpZXcgfVxuIiwiaW1wb3J0IHsgY291cnNlcyB9IGZyb20gXCIuLi9tb2RlbHMvY291cnNlXCJcbmltcG9ydCB7IHN0dWRlbnRzIH0gZnJvbSBcIi4uL21vZGVscy9zdHVkZW50XCJcbmltcG9ydCB7IFBlcnNvbiB9IGZyb20gXCIuLi90eXBlc1wiXG5pbXBvcnQgeyBsaXN0VmlldyB9IGZyb20gXCIuLi92aWV3cy9saXN0LXZpZXdcIlxuaW1wb3J0IHsgbW9kYWxWaWV3IH0gZnJvbSBcIi4uL3ZpZXdzL21vZGFsLXZpZXdcIlxuXG5jb25zdCBzdHVkZW50Q29udHJvbGxlciA9IChcbiAgcGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW5cIikgYXMgSFRNTERpdkVsZW1lbnRcbikgPT4ge1xuICBjb25zdCB2aWV3ID0gbGlzdFZpZXcocGFyZW50RWxlbWVudCwgc3R1ZGVudHMsIFwic3R1ZGVudHNcIiwgW1wibmFtZVwiLCBcImVtYWlsXCIsIFwiYWdlXCJdKVxuXG4gIGNvbnN0IHJlbmRlciA9ICgpID0+IHtcbiAgICB2aWV3LmluaXQoKVxuICB9XG5cbiAgY29uc3QgZ2V0U3R1ZGVudCA9IChpZDogbnVtYmVyKSA9PiB7XG4gICAgY29uc3Qgc3R1ZGVudCA9IHN0dWRlbnRzLmZpbmQoc3R1ZGVudCA9PiBzdHVkZW50LmlkID09PSBpZCkgYXMgUGVyc29uXG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpIGFzIEhUTUxEaXZFbGVtZW50XG4gICAgbW9kYWxWaWV3KG1vZGFsLCBzdHVkZW50LCBjb3Vyc2VzLCBcImNvdXJzZXNcIiwgW1widGl0bGVcIiwgXCJkdXJhdGlvblwiXSkuaW5pdCgpXG4gIH1cblxuICBjb25zdCBoYW5kbGVDbGljayA9ICgpID0+IHtcbiAgICB2aWV3Lm9uQ2xpY2soZ2V0U3R1ZGVudClcbiAgfVxuXG4gIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgcmVuZGVyKClcbiAgICBoYW5kbGVDbGljaygpXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGluaXQsXG4gIH1cbn1cblxuZXhwb3J0IHsgc3R1ZGVudENvbnRyb2xsZXIgfVxuIiwiaW1wb3J0IHsgdGVhY2hlckNvbnRyb2xsZXIgfSBmcm9tIFwiLi93ZXNjb2FzdDMuMC9jb250cm9sbGVycy90ZWFjaGVyXCJcbmltcG9ydCB7IHN0dWRlbnRDb250cm9sbGVyIH0gZnJvbSBcIi4vd2VzY29hc3QzLjAvY29udHJvbGxlcnMvc3R1ZGVudFwiXG47KCgpID0+IHtcbiAgc3R1ZGVudENvbnRyb2xsZXIoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdHVkZW50c1wiKSBhcyBIVE1MRGl2RWxlbWVudCkuaW5pdCgpXG4gIHRlYWNoZXJDb250cm9sbGVyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGVhY2hlcnNcIikgYXMgSFRNTERpdkVsZW1lbnQpLmluaXQoKVxufSkoKVxuIl0sInNvdXJjZVJvb3QiOiIifQ==