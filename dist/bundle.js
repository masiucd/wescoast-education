(()=>{"use strict";var t,e=function(){function t(t,e,n,s){var i=this;this.id=t,this.subject=e,this.students=n,this.teacher=s,this.teacher.subjects.push(this.subject),this.students.forEach((function(t){console.log(i),console.log(t)}))}return t.prototype.addStudent=function(t){this.students.push(t),t.courses.push(this)},t.prototype.removeStudent=function(t){this.students=this.students.filter((function(e){return e.id!==t}))},t.prototype.getStudent=function(t){var e=this.students.find((function(e){return e.id===t}));return e&&e},t.prototype.updateStudent=function(t){},t}(),n=function(t,e,n){this.id=t,this.firstName=e,this.lastName=n},s=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)},function(e,n){function s(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}),i=function(t){function e(e,n,s,i){var r=t.call(this,e,n,s)||this;return r.subjects=i,r}return s(e,t),e}(n),r=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function s(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),o=function(t){function e(e,n,s,i){var r=t.call(this,e,n,s)||this;return r.courses=i,r}return r(e,t),e}(n),u=function(){function t(t,e,n){this.students=t,this.courses=e,this.teachers=n,this.main=this.getElement("#root"),this.wrapper=this.createElement("div","wrapper"),this.title=this.createElement("h1","main-title"),this.title.textContent="WesCoast",this.showDataButton=this.createElement("button","show-data-btn"),this.showDataButton.textContent="show data",this.coursesList=this.createElement("ul","courses-list"),this.studentList=this.createElement("ul","students-list"),this.teachersList=this.createElement("ul","teachers-list"),this.coursesList.classList.add("hide"),this.teachersList.classList.add("hide"),this.studentList.classList.add("hide"),this.wrapper.append(this.title,this.showDataButton,this.coursesList,this.studentList,this.teachersList),this.main.append(this.wrapper)}return t.prototype.createElement=function(t,e){void 0===e&&(e="");var n=document.createElement(t);return e&&n.classList.add(e),n},t.prototype.getElement=function(t){return document.querySelector(t)},t.prototype.renderStudents=function(){return this.students.map((function(t){return'\n        <li class="student">'+t.firstName+"-"+t.lastName+"</li>\n        <p>"+t.firstName+" currently study:</p>\n        "+t.courses.map((function(t){return"<li>"+t.subject+"</li>"})).join("")+"\n      "})).join("")},t.prototype.renderTeachers=function(){return this.teachers.map((function(t){return'\n        <li class="teacher">'+t.firstName+"-"+t.lastName+"</li>\n        <p>"+t.firstName+" main subjects:</p>\n        "+t.subjects.map((function(t){return'<li class="subject">'+t+"</li> "})).join("")+"\n      "})).join("")},t.prototype.renderCourses=function(){return this.courses.map((function(t){return'\n        <li class="course">'+t.subject+"</li>\n        <p>Students that read "+t.subject+"</p>\n        "+t.students.map((function(t){return"<li>"+t.firstName+"- "+t.lastName+" </li>"})).join("")+"\n      "})).join("")},t.prototype.render=function(){var t,e=this;this.studentList.innerHTML='\n      <li class="title"> <strong> Student List </strong> </li>\n      '+this.renderStudents()+"\n    ",this.teachersList.innerHTML='\n    <li class="title"> <strong>Teachers List</strong> </li>\n      '+this.renderTeachers()+"\n    ",this.coursesList.innerHTML='\n    <li class="title"> <strong>Courses List</strong> </li>\n      '+this.renderCourses()+"\n    ",this.showDataButton.addEventListener("click",(function(){e.studentList.classList.toggle("show"),e.coursesList.classList.toggle("show"),e.teachersList.classList.toggle("show")})),null===(t=this.coursesList.firstElementChild)||void 0===t||t.addEventListener("click",(function(){var t=e.getElement(".modal");t.classList.add("show-modal"),console.log("w"),t.innerHTML='\n        <div class="modal-body">\n          <h1>Hello there</h1> \n        </div>\n      '})),document.querySelectorAll(".course").forEach((function(t){t.addEventListener("click",(function(t){console.log("course")}))}))},t}();let c=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let s=63&n[t];e+=s<36?s.toString(36):s<62?(s-26).toString(36).toUpperCase():s<63?"_":"-"}return e};(function(){var t=new o(c(),"Mike","Szymkowiak",[]),n=new o(c(),"Jon","Smith",[]),s=new o(c(),"Clara","Sten",[]),r=new o(c(),"Kim","Kallstrom",[]),a=new o(c(),"Stina","Turner",[]),l=new i(c(),"Boris","Einstein",[]),h=new i(c(),"Linda","Smith",[]),d=new i(c(),"Mia","Jonson",[]),p=new e(c(),"math",[],l),f=new e(c(),"english",[],h),m=new e(c(),"swedish",[],d),w=new e(c(),"history",[],l);p.addStudent(t),p.addStudent(n),f.addStudent(s),f.addStudent(a),w.addStudent(t),w.addStudent(a),m.addStudent(r),m.addStudent(a);var L=[t,n,s],y=[l,h,d],S=[p,f,m];return{init:function(){new u(L,S,y).render()}}})().init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9zY2hvb2wvZGF0YS9Db3Vyc2UudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvc2Nob29sL2RhdGEvUGVyc29uLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3NjaG9vbC9kYXRhL1RlYWNoZXIudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvc2Nob29sL2RhdGEvU3R1ZGVudC50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9zY2hvb2wvdmlldy9WaWV3LnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vbm9kZV9tb2R1bGVzL25hbm9pZC9pbmRleC5wcm9kLmpzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImlkIiwic3ViamVjdCIsInN0dWRlbnRzIiwidGVhY2hlciIsInRoaXMiLCJzdWJqZWN0cyIsInB1c2giLCJmb3JFYWNoIiwic3R1ZGVudCIsImNvbnNvbGUiLCJsb2ciLCJhZGRTdHVkZW50IiwiY291cnNlcyIsInJlbW92ZVN0dWRlbnQiLCJzdHVkZW50SUQiLCJmaWx0ZXIiLCJnZXRTdHVkZW50IiwiZmluZCIsInVwZGF0ZVN0dWRlbnQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsIlBlcnNvbiIsInRlYWNoZXJzIiwibWFpbiIsImdldEVsZW1lbnQiLCJ3cmFwcGVyIiwiY3JlYXRlRWxlbWVudCIsInRpdGxlIiwidGV4dENvbnRlbnQiLCJzaG93RGF0YUJ1dHRvbiIsImNvdXJzZXNMaXN0Iiwic3R1ZGVudExpc3QiLCJ0ZWFjaGVyc0xpc3QiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmQiLCJ0YWciLCJjbGFzc05hbWUiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJzZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3IiLCJyZW5kZXJTdHVkZW50cyIsIm1hcCIsImNvdXJzZSIsImpvaW4iLCJyZW5kZXJUZWFjaGVycyIsInJlbmRlckNvdXJzZXMiLCJyZW5kZXIiLCJpbm5lckhUTUwiLCJhZGRFdmVudExpc3RlbmVyIiwidG9nZ2xlIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJtb2RhbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlIiwibmFub2lkIiwic2l6ZSIsImJ5dGVzIiwiY3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiVWludDhBcnJheSIsImJ5dGUiLCJ0b1N0cmluZyIsInRvVXBwZXJDYXNlIiwibWlrZSIsIlN0dWRlbnQiLCJqb24iLCJjbGFyYSIsImtpbSIsInN0aW5hIiwiYm9yaXMiLCJUZWFjaGVyIiwibGluZGEiLCJtaWEiLCJtYXRoIiwiQ291cnNlIiwiZW5nbGlzaCIsInN3ZWRpc2giLCJoaXN0b3J5IiwiaW5pdCIsIlZpZXciLCJjb250cm9sbGVyIl0sIm1hcHBpbmdzIjoibUJBS0EsSSxFQUFBLGFBS0UsV0FBWUEsRUFBWUMsRUFBa0JDLEVBQXFCQyxHQUEvRCxXQUNFQyxLQUFLSixHQUFLQSxFQUNWSSxLQUFLSCxRQUFVQSxFQUNmRyxLQUFLRixTQUFXQSxFQUNoQkUsS0FBS0QsUUFBVUEsRUFFZkMsS0FBS0QsUUFBUUUsU0FBU0MsS0FBS0YsS0FBS0gsU0FDaENHLEtBQUtGLFNBQVNLLFNBQVEsU0FBQUMsR0FFcEJDLFFBQVFDLElBQUksR0FDWkQsUUFBUUMsSUFBSUYsTUFpQmxCLE9BYkUsWUFBQUcsV0FBQSxTQUFXSCxHQUNUSixLQUFLRixTQUFTSSxLQUFLRSxHQUNuQkEsRUFBUUksUUFBUU4sS0FBS0YsT0FHdkIsWUFBQVMsY0FBQSxTQUFjQyxHQUNaVixLQUFLRixTQUFXRSxLQUFLRixTQUFTYSxRQUFPLFNBQUFQLEdBQVcsT0FBQUEsRUFBUVIsS0FBT2MsTUFFakUsWUFBQUUsV0FBQSxTQUFXRixHQUNULElBQU1OLEVBQVVKLEtBQUtGLFNBQVNlLE1BQUssU0FBQVQsR0FBVyxPQUFBQSxFQUFRUixLQUFPYyxLQUM3RCxPQUFPTixHQUFXQSxHQUVwQixZQUFBVSxjQUFBLFNBQWNWLEtBQ2hCLEVBaENBLEdDTEEsRUFLRSxTQUFZUixFQUFZbUIsRUFBbUJDLEdBQ3pDaEIsS0FBS0osR0FBS0EsRUFDVkksS0FBS2UsVUFBWUEsRUFDakJmLEtBQUtnQixTQUFXQSxHLDBVQ0xwQixjQUdFLFdBQVlwQixFQUFZbUIsRUFBbUJDLEVBQWtCZixHQUE3RCxNQUNFLFlBQU1MLEVBQUltQixFQUFXQyxJQUFTLEssT0FDOUIsRUFBS2YsU0FBV0EsRSxFQUVwQixPQVA2QixPQU83QixFQVBBLENBQTZCZ0IsRyxpV0NBN0IsY0FHRSxXQUFZckIsRUFBWW1CLEVBQW1CQyxFQUFrQlIsR0FBN0QsTUFDRSxZQUFNWixFQUFJbUIsRUFBV0MsSUFBUyxLLE9BQzlCLEVBQUtSLFFBQVVBLEUsRUFFbkIsT0FQNkIsT0FPN0IsRUFQQSxDQUE2QlMsR0NDN0IsYUFhRSxXQUFZbkIsRUFBcUJVLEVBQW1CVSxHQUNsRGxCLEtBQUtGLFNBQVdBLEVBQ2hCRSxLQUFLUSxRQUFVQSxFQUNmUixLQUFLa0IsU0FBV0EsRUFFaEJsQixLQUFLbUIsS0FBT25CLEtBQUtvQixXQUFXLFNBQzVCcEIsS0FBS3FCLFFBQVVyQixLQUFLc0IsY0FBYyxNQUFPLFdBRXpDdEIsS0FBS3VCLE1BQVF2QixLQUFLc0IsY0FBYyxLQUFNLGNBQ3RDdEIsS0FBS3VCLE1BQU1DLFlBQWMsV0FFekJ4QixLQUFLeUIsZUFBaUJ6QixLQUFLc0IsY0FBYyxTQUFVLGlCQUNuRHRCLEtBQUt5QixlQUFlRCxZQUFjLFlBRWxDeEIsS0FBSzBCLFlBQWMxQixLQUFLc0IsY0FBYyxLQUFNLGdCQUM1Q3RCLEtBQUsyQixZQUFjM0IsS0FBS3NCLGNBQWMsS0FBTSxpQkFDNUN0QixLQUFLNEIsYUFBZTVCLEtBQUtzQixjQUFjLEtBQU0saUJBQzdDdEIsS0FBSzBCLFlBQVlHLFVBQVVDLElBQUksUUFDL0I5QixLQUFLNEIsYUFBYUMsVUFBVUMsSUFBSSxRQUNoQzlCLEtBQUsyQixZQUFZRSxVQUFVQyxJQUFJLFFBRS9COUIsS0FBS3FCLFFBQVFVLE9BQ1gvQixLQUFLdUIsTUFDTHZCLEtBQUt5QixlQUNMekIsS0FBSzBCLFlBQ0wxQixLQUFLMkIsWUFDTDNCLEtBQUs0QixjQUdQNUIsS0FBS21CLEtBQUtZLE9BQU8vQixLQUFLcUIsU0E2RjFCLE9BMUZFLFlBQUFDLGNBQUEsU0FBY1UsRUFBYUMsUUFBQSxJQUFBQSxNQUFBLElBQ3pCLElBQU1DLEVBQVVDLFNBQVNiLGNBQWNVLEdBR3ZDLE9BRklDLEdBQVdDLEVBQVFMLFVBQVVDLElBQUlHLEdBRTlCQyxHQUdULFlBQUFkLFdBQUEsU0FBV2dCLEdBR1QsT0FGZ0JELFNBQVNFLGNBQWNELElBS2pDLFlBQUFFLGVBQVIsV0FDRSxPQUFPdEMsS0FBS0YsU0FDVHlDLEtBQ0MsU0FBQW5DLEdBQ0UsdUNBQ29CQSxFQUFRVyxVQUFTLElBQUlYLEVBQVFZLFNBQVEscUJBQ3REWixFQUFRVyxVQUFTLGtDQUNwQlgsRUFBUUksUUFBUStCLEtBQUksU0FBQ0MsR0FBbUIsYUFBT0EsRUFBTzNDLFFBQU8sV0FBUzRDLEtBQUssSUFBRyxjQUdqRkEsS0FBSyxLQUVGLFlBQUFDLGVBQVIsV0FDRSxPQUFPMUMsS0FBS2tCLFNBQ1RxQixLQUNDLFNBQUF4QyxHQUNFLHVDQUNvQkEsRUFBUWdCLFVBQVMsSUFBSWhCLEVBQVFpQixTQUFRLHFCQUN0RGpCLEVBQVFnQixVQUFTLGdDQUNwQmhCLEVBQVFFLFNBQVNzQyxLQUFJLFNBQUExQyxHQUFXLDZCQUF1QkEsRUFBTyxZQUFVNEMsS0FBSyxJQUFHLGNBR25GQSxLQUFLLEtBRUYsWUFBQUUsY0FBUixXQUNFLE9BQU8zQyxLQUFLUSxRQUNUK0IsS0FDQyxTQUFBQyxHQUNFLHNDQUNtQkEsRUFBTzNDLFFBQU8sd0NBQ1gyQyxFQUFPM0MsUUFBTyxpQkFDcEMyQyxFQUFPMUMsU0FDTnlDLEtBQUksU0FBQ25DLEdBQXFCLGFBQU9BLEVBQVFXLFVBQVMsS0FBS1gsRUFBUVksU0FBUSxZQUN2RXlCLEtBQUssSUFBRyxjQUdaQSxLQUFLLEtBR1YsWUFBQUcsT0FBQSxlLEVBQUEsT0FDRTVDLEtBQUsyQixZQUFZa0IsVUFBWSwyRUFFekI3QyxLQUFLc0MsaUJBQWdCLFNBR3pCdEMsS0FBSzRCLGFBQWFpQixVQUFZLHdFQUUxQjdDLEtBQUswQyxpQkFBZ0IsU0FFekIxQyxLQUFLMEIsWUFBWW1CLFVBQVksdUVBRXpCN0MsS0FBSzJDLGdCQUFlLFNBRXhCM0MsS0FBS3lCLGVBQWVxQixpQkFBaUIsU0FBUyxXQUM1QyxFQUFLbkIsWUFBWUUsVUFBVWtCLE9BQU8sUUFDbEMsRUFBS3JCLFlBQVlHLFVBQVVrQixPQUFPLFFBQ2xDLEVBQUtuQixhQUFhQyxVQUFVa0IsT0FBTyxXQUdILFFBQWxDLEVBQUEvQyxLQUFLMEIsWUFBWXNCLHlCQUFpQixTQUFFRixpQkFBaUIsU0FBUyxXQUM1RCxJQUFNRyxFQUFRLEVBQUs3QixXQUFXLFVBQzlCNkIsRUFBTXBCLFVBQVVDLElBQUksY0FDcEJ6QixRQUFRQyxJQUFJLEtBRVoyQyxFQUFNSixVQUFZLGlHQU9wQlYsU0FBU2UsaUJBQWlCLFdBQVcvQyxTQUFRLFNBQUFxQyxHQUMzQ0EsRUFBT00saUJBQWlCLFNBQVMsU0FBQUssR0FDL0I5QyxRQUFRQyxJQUFJLGlCQUlwQixFQXZJQSxHQzhCQSxJQTRDSThDLEVBQVMsQ0FBQ0MsRUFBTyxNQUNuQixJQUFJekQsRUFBSyxHQUNMMEQsRUFBUUMsT0FBT0MsZ0JBQWdCLElBQUlDLFdBQVdKLElBR2xELEtBQU9BLEtBQVEsQ0FNYixJQUFJSyxFQUFxQixHQUFkSixFQUFNRCxHQUdmekQsR0FGRThELEVBQU8sR0FFSEEsRUFBS0MsU0FBUyxJQUNYRCxFQUFPLElBRVRBLEVBQU8sSUFBSUMsU0FBUyxJQUFJQyxjQUN0QkYsRUFBTyxHQUNWLElBRUEsSUFHVixPQUFPOUQsSUNoR1AsV0FDRSxJQUFNaUUsRUFBTyxJQUFJQyxFQUFRVixJQUFVLE9BQVEsYUFBYyxJQUNuRFcsRUFBTSxJQUFJRCxFQUFRVixJQUFVLE1BQU8sUUFBUyxJQUM1Q1ksRUFBUSxJQUFJRixFQUFRVixJQUFVLFFBQVMsT0FBUSxJQUMvQ2EsRUFBTSxJQUFJSCxFQUFRVixJQUFVLE1BQU8sWUFBYSxJQUNoRGMsRUFBUSxJQUFJSixFQUFRVixJQUFVLFFBQVMsU0FBVSxJQUVqRGUsRUFBUSxJQUFJQyxFQUFRaEIsSUFBVSxRQUFTLFdBQVksSUFDbkRpQixFQUFRLElBQUlELEVBQVFoQixJQUFVLFFBQVMsUUFBUyxJQUNoRGtCLEVBQU0sSUFBSUYsRUFBUWhCLElBQVUsTUFBTyxTQUFVLElBRTdDbUIsRUFBTyxJQUFJQyxFQUFPcEIsSUFBVSxPQUFRLEdBQUllLEdBQ3hDTSxFQUFVLElBQUlELEVBQU9wQixJQUFVLFVBQVcsR0FBSWlCLEdBQzlDSyxFQUFVLElBQUlGLEVBQU9wQixJQUFVLFVBQVcsR0FBSWtCLEdBQzlDSyxFQUFVLElBQUlILEVBQU9wQixJQUFVLFVBQVcsR0FBSWUsR0FFcERJLEVBQUtoRSxXQUFXc0QsR0FDaEJVLEVBQUtoRSxXQUFXd0QsR0FDaEJVLEVBQVFsRSxXQUFXeUQsR0FDbkJTLEVBQVFsRSxXQUFXMkQsR0FDbkJTLEVBQVFwRSxXQUFXc0QsR0FDbkJjLEVBQVFwRSxXQUFXMkQsR0FDbkJRLEVBQVFuRSxXQUFXMEQsR0FDbkJTLEVBQVFuRSxXQUFXMkQsR0FFbkIsSUFBTXBFLEVBQVcsQ0FBQytELEVBQU1FLEVBQUtDLEdBQ3ZCOUMsRUFBVyxDQUFDaUQsRUFBT0UsRUFBT0MsR0FDMUI5RCxFQUFVLENBQUMrRCxFQUFNRSxFQUFTQyxHQU9oQyxNQUFPLENBQ0xFLEtBTlcsV0FDRCxJQUFJQyxFQUFLL0UsRUFBVVUsRUFBU1UsR0FDcEMwQixZQU9Oa0MsR0FBYUYsUSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBuYW5vaWQgfSBmcm9tIFwibmFub2lkXCJcbmltcG9ydCB7IFRlYWNoZXIgfSBmcm9tIFwiLi9UZWFjaGVyXCJcbmltcG9ydCB7IFN0dWRlbnQgfSBmcm9tIFwiLi9TdHVkZW50XCJcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tIFwiLi9UeXBlc1wiXG5cbmV4cG9ydCBjbGFzcyBDb3Vyc2Uge1xuICBpZDogc3RyaW5nXG4gIHN1YmplY3Q6IFN1YmplY3RcbiAgc3R1ZGVudHM6IFN0dWRlbnRbXVxuICB0ZWFjaGVyOiBUZWFjaGVyXG4gIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcsIHN1YmplY3Q6IFN1YmplY3QsIHN0dWRlbnRzOiBTdHVkZW50W10sIHRlYWNoZXI6IFRlYWNoZXIpIHtcbiAgICB0aGlzLmlkID0gaWRcbiAgICB0aGlzLnN1YmplY3QgPSBzdWJqZWN0XG4gICAgdGhpcy5zdHVkZW50cyA9IHN0dWRlbnRzXG4gICAgdGhpcy50ZWFjaGVyID0gdGVhY2hlclxuXG4gICAgdGhpcy50ZWFjaGVyLnN1YmplY3RzLnB1c2godGhpcy5zdWJqZWN0KVxuICAgIHRoaXMuc3R1ZGVudHMuZm9yRWFjaChzdHVkZW50ID0+IHtcbiAgICAgIC8vIHN0dWRlbnQuY291cnNlcy5wdXNoKHRoaXMpXG4gICAgICBjb25zb2xlLmxvZyh0aGlzKVxuICAgICAgY29uc29sZS5sb2coc3R1ZGVudClcbiAgICB9KVxuICB9XG5cbiAgYWRkU3R1ZGVudChzdHVkZW50OiBTdHVkZW50KSB7XG4gICAgdGhpcy5zdHVkZW50cy5wdXNoKHN0dWRlbnQpXG4gICAgc3R1ZGVudC5jb3Vyc2VzLnB1c2godGhpcylcbiAgfVxuXG4gIHJlbW92ZVN0dWRlbnQoc3R1ZGVudElEOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnN0dWRlbnRzID0gdGhpcy5zdHVkZW50cy5maWx0ZXIoc3R1ZGVudCA9PiBzdHVkZW50LmlkICE9PSBzdHVkZW50SUQpXG4gIH1cbiAgZ2V0U3R1ZGVudChzdHVkZW50SUQ6IHN0cmluZyk6IFN0dWRlbnQgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHN0dWRlbnQgPSB0aGlzLnN0dWRlbnRzLmZpbmQoc3R1ZGVudCA9PiBzdHVkZW50LmlkID09PSBzdHVkZW50SUQpXG4gICAgcmV0dXJuIHN0dWRlbnQgJiYgc3R1ZGVudFxuICB9XG4gIHVwZGF0ZVN0dWRlbnQoc3R1ZGVudDogU3R1ZGVudCk6IHZvaWQge31cbn1cbiIsImV4cG9ydCBjbGFzcyBQZXJzb24ge1xuICBpZDogc3RyaW5nXG4gIGZpcnN0TmFtZTogc3RyaW5nXG4gIGxhc3ROYW1lOiBzdHJpbmdcblxuICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nLCBmaXJzdE5hbWU6IHN0cmluZywgbGFzdE5hbWU6IHN0cmluZykge1xuICAgIHRoaXMuaWQgPSBpZFxuICAgIHRoaXMuZmlyc3ROYW1lID0gZmlyc3ROYW1lXG4gICAgdGhpcy5sYXN0TmFtZSA9IGxhc3ROYW1lXG4gIH1cbn1cbiIsImltcG9ydCB7IFBlcnNvbiB9IGZyb20gXCIuL1BlcnNvblwiXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSBcIi4vVHlwZXNcIlxuXG5leHBvcnQgY2xhc3MgVGVhY2hlciBleHRlbmRzIFBlcnNvbiB7XG4gIHN1YmplY3RzOiBTdWJqZWN0W11cblxuICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nLCBmaXJzdE5hbWU6IHN0cmluZywgbGFzdE5hbWU6IHN0cmluZywgc3ViamVjdHM6IFN1YmplY3RbXSkge1xuICAgIHN1cGVyKGlkLCBmaXJzdE5hbWUsIGxhc3ROYW1lKVxuICAgIHRoaXMuc3ViamVjdHMgPSBzdWJqZWN0c1xuICB9XG59XG4iLCJpbXBvcnQgeyBDb3Vyc2UgfSBmcm9tIFwiLi9Db3Vyc2VcIlxuaW1wb3J0IHsgUGVyc29uIH0gZnJvbSBcIi4vUGVyc29uXCJcblxuZXhwb3J0IGNsYXNzIFN0dWRlbnQgZXh0ZW5kcyBQZXJzb24ge1xuICBjb3Vyc2VzOiBDb3Vyc2VbXVxuXG4gIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcsIGZpcnN0TmFtZTogc3RyaW5nLCBsYXN0TmFtZTogc3RyaW5nLCBjb3Vyc2VzOiBDb3Vyc2VbXSkge1xuICAgIHN1cGVyKGlkLCBmaXJzdE5hbWUsIGxhc3ROYW1lKVxuICAgIHRoaXMuY291cnNlcyA9IGNvdXJzZXNcbiAgfVxufVxuIiwiaW1wb3J0IHsgU3R1ZGVudCB9IGZyb20gXCIuLi9kYXRhL1N0dWRlbnRcIlxuaW1wb3J0IHsgQ291cnNlIH0gZnJvbSBcIi4uL2RhdGEvQ291cnNlXCJcbmltcG9ydCB7IFRlYWNoZXIgfSBmcm9tIFwiLi4vZGF0YS9UZWFjaGVyXCJcblxuZXhwb3J0IGNsYXNzIFZpZXcge1xuICBtYWluOiBIVE1MRGl2RWxlbWVudFxuICB3cmFwcGVyOiBIVE1MRGl2RWxlbWVudFxuICB0aXRsZTogSFRNTEhlYWRFbGVtZW50XG5cbiAgc2hvd0RhdGFCdXR0b246IEhUTUxCdXR0b25FbGVtZW50XG4gIHN0dWRlbnRzOiBTdHVkZW50W11cbiAgY291cnNlczogQ291cnNlW11cbiAgdGVhY2hlcnM6IFRlYWNoZXJbXVxuICBzdHVkZW50TGlzdDogSFRNTFVMaXN0RWxlbWVudFxuICB0ZWFjaGVyc0xpc3Q6IEhUTUxVTGlzdEVsZW1lbnRcbiAgY291cnNlc0xpc3Q6IEhUTUxVTGlzdEVsZW1lbnRcblxuICBjb25zdHJ1Y3RvcihzdHVkZW50czogU3R1ZGVudFtdLCBjb3Vyc2VzOiBDb3Vyc2VbXSwgdGVhY2hlcnM6IFRlYWNoZXJbXSkge1xuICAgIHRoaXMuc3R1ZGVudHMgPSBzdHVkZW50c1xuICAgIHRoaXMuY291cnNlcyA9IGNvdXJzZXNcbiAgICB0aGlzLnRlYWNoZXJzID0gdGVhY2hlcnNcblxuICAgIHRoaXMubWFpbiA9IHRoaXMuZ2V0RWxlbWVudChcIiNyb290XCIpIGFzIEhUTUxEaXZFbGVtZW50XG4gICAgdGhpcy53cmFwcGVyID0gdGhpcy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwid3JhcHBlclwiKSBhcyBIVE1MRGl2RWxlbWVudFxuXG4gICAgdGhpcy50aXRsZSA9IHRoaXMuY3JlYXRlRWxlbWVudChcImgxXCIsIFwibWFpbi10aXRsZVwiKSBhcyBIVE1MSGVhZEVsZW1lbnRcbiAgICB0aGlzLnRpdGxlLnRleHRDb250ZW50ID0gXCJXZXNDb2FzdFwiXG5cbiAgICB0aGlzLnNob3dEYXRhQnV0dG9uID0gdGhpcy5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIFwic2hvdy1kYXRhLWJ0blwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIHRoaXMuc2hvd0RhdGFCdXR0b24udGV4dENvbnRlbnQgPSBcInNob3cgZGF0YVwiXG5cbiAgICB0aGlzLmNvdXJzZXNMaXN0ID0gdGhpcy5jcmVhdGVFbGVtZW50KFwidWxcIiwgXCJjb3Vyc2VzLWxpc3RcIikgYXMgSFRNTFVMaXN0RWxlbWVudFxuICAgIHRoaXMuc3R1ZGVudExpc3QgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLCBcInN0dWRlbnRzLWxpc3RcIikgYXMgSFRNTFVMaXN0RWxlbWVudFxuICAgIHRoaXMudGVhY2hlcnNMaXN0ID0gdGhpcy5jcmVhdGVFbGVtZW50KFwidWxcIiwgXCJ0ZWFjaGVycy1saXN0XCIpIGFzIEhUTUxVTGlzdEVsZW1lbnRcbiAgICB0aGlzLmNvdXJzZXNMaXN0LmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpXG4gICAgdGhpcy50ZWFjaGVyc0xpc3QuY2xhc3NMaXN0LmFkZChcImhpZGVcIilcbiAgICB0aGlzLnN0dWRlbnRMaXN0LmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpXG5cbiAgICB0aGlzLndyYXBwZXIuYXBwZW5kKFxuICAgICAgdGhpcy50aXRsZSxcbiAgICAgIHRoaXMuc2hvd0RhdGFCdXR0b24sXG4gICAgICB0aGlzLmNvdXJzZXNMaXN0LFxuICAgICAgdGhpcy5zdHVkZW50TGlzdCxcbiAgICAgIHRoaXMudGVhY2hlcnNMaXN0XG4gICAgKVxuXG4gICAgdGhpcy5tYWluLmFwcGVuZCh0aGlzLndyYXBwZXIpXG4gIH1cblxuICBjcmVhdGVFbGVtZW50KHRhZzogc3RyaW5nLCBjbGFzc05hbWU6IHN0cmluZyA9IFwiXCIpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpXG4gICAgaWYgKGNsYXNzTmFtZSkgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSlcblxuICAgIHJldHVybiBlbGVtZW50XG4gIH1cblxuICBnZXRFbGVtZW50KHNlbGVjdG9yOiBzdHJpbmcpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcilcblxuICAgIHJldHVybiBlbGVtZW50XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclN0dWRlbnRzKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuc3R1ZGVudHNcbiAgICAgIC5tYXAoXG4gICAgICAgIHN0dWRlbnQgPT5cbiAgICAgICAgICBgXG4gICAgICAgIDxsaSBjbGFzcz1cInN0dWRlbnRcIj4ke3N0dWRlbnQuZmlyc3ROYW1lfS0ke3N0dWRlbnQubGFzdE5hbWV9PC9saT5cbiAgICAgICAgPHA+JHtzdHVkZW50LmZpcnN0TmFtZX0gY3VycmVudGx5IHN0dWR5OjwvcD5cbiAgICAgICAgJHtzdHVkZW50LmNvdXJzZXMubWFwKChjb3Vyc2U6IENvdXJzZSkgPT4gYDxsaT4ke2NvdXJzZS5zdWJqZWN0fTwvbGk+YCkuam9pbihcIlwiKX1cbiAgICAgIGBcbiAgICAgIClcbiAgICAgIC5qb2luKFwiXCIpXG4gIH1cbiAgcHJpdmF0ZSByZW5kZXJUZWFjaGVycygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnRlYWNoZXJzXG4gICAgICAubWFwKFxuICAgICAgICB0ZWFjaGVyID0+XG4gICAgICAgICAgYFxuICAgICAgICA8bGkgY2xhc3M9XCJ0ZWFjaGVyXCI+JHt0ZWFjaGVyLmZpcnN0TmFtZX0tJHt0ZWFjaGVyLmxhc3ROYW1lfTwvbGk+XG4gICAgICAgIDxwPiR7dGVhY2hlci5maXJzdE5hbWV9IG1haW4gc3ViamVjdHM6PC9wPlxuICAgICAgICAke3RlYWNoZXIuc3ViamVjdHMubWFwKHN1YmplY3QgPT4gYDxsaSBjbGFzcz1cInN1YmplY3RcIj4ke3N1YmplY3R9PC9saT4gYCkuam9pbihcIlwiKX1cbiAgICAgIGBcbiAgICAgIClcbiAgICAgIC5qb2luKFwiXCIpXG4gIH1cbiAgcHJpdmF0ZSByZW5kZXJDb3Vyc2VzKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY291cnNlc1xuICAgICAgLm1hcChcbiAgICAgICAgY291cnNlID0+XG4gICAgICAgICAgYFxuICAgICAgICA8bGkgY2xhc3M9XCJjb3Vyc2VcIj4ke2NvdXJzZS5zdWJqZWN0fTwvbGk+XG4gICAgICAgIDxwPlN0dWRlbnRzIHRoYXQgcmVhZCAke2NvdXJzZS5zdWJqZWN0fTwvcD5cbiAgICAgICAgJHtjb3Vyc2Uuc3R1ZGVudHNcbiAgICAgICAgICAubWFwKChzdHVkZW50OiBTdHVkZW50KSA9PiBgPGxpPiR7c3R1ZGVudC5maXJzdE5hbWV9LSAke3N0dWRlbnQubGFzdE5hbWV9IDwvbGk+YClcbiAgICAgICAgICAuam9pbihcIlwiKX1cbiAgICAgIGBcbiAgICAgIClcbiAgICAgIC5qb2luKFwiXCIpXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5zdHVkZW50TGlzdC5pbm5lckhUTUwgPSBgXG4gICAgICA8bGkgY2xhc3M9XCJ0aXRsZVwiPiA8c3Ryb25nPiBTdHVkZW50IExpc3QgPC9zdHJvbmc+IDwvbGk+XG4gICAgICAke3RoaXMucmVuZGVyU3R1ZGVudHMoKX1cbiAgICBgXG5cbiAgICB0aGlzLnRlYWNoZXJzTGlzdC5pbm5lckhUTUwgPSBgXG4gICAgPGxpIGNsYXNzPVwidGl0bGVcIj4gPHN0cm9uZz5UZWFjaGVycyBMaXN0PC9zdHJvbmc+IDwvbGk+XG4gICAgICAke3RoaXMucmVuZGVyVGVhY2hlcnMoKX1cbiAgICBgXG4gICAgdGhpcy5jb3Vyc2VzTGlzdC5pbm5lckhUTUwgPSBgXG4gICAgPGxpIGNsYXNzPVwidGl0bGVcIj4gPHN0cm9uZz5Db3Vyc2VzIExpc3Q8L3N0cm9uZz4gPC9saT5cbiAgICAgICR7dGhpcy5yZW5kZXJDb3Vyc2VzKCl9XG4gICAgYFxuICAgIHRoaXMuc2hvd0RhdGFCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuc3R1ZGVudExpc3QuY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIilcbiAgICAgIHRoaXMuY291cnNlc0xpc3QuY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIilcbiAgICAgIHRoaXMudGVhY2hlcnNMaXN0LmNsYXNzTGlzdC50b2dnbGUoXCJzaG93XCIpXG4gICAgfSlcblxuICAgIHRoaXMuY291cnNlc0xpc3QuZmlyc3RFbGVtZW50Q2hpbGQ/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBtb2RhbCA9IHRoaXMuZ2V0RWxlbWVudChcIi5tb2RhbFwiKSBhcyBIVE1MRGl2RWxlbWVudFxuICAgICAgbW9kYWwuY2xhc3NMaXN0LmFkZChcInNob3ctbW9kYWxcIilcbiAgICAgIGNvbnNvbGUubG9nKFwid1wiKVxuXG4gICAgICBtb2RhbC5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XG4gICAgICAgICAgPGgxPkhlbGxvIHRoZXJlPC9oMT4gXG4gICAgICAgIDwvZGl2PlxuICAgICAgYFxuICAgIH0pXG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvdXJzZVwiKS5mb3JFYWNoKGNvdXJzZSA9PiB7XG4gICAgICBjb3Vyc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcImNvdXJzZVwiKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG59XG4iLCIvLyBUaGlzIGZpbGUgcmVwbGFjZXMgYGluZGV4LmpzYCBpbiBidW5kbGVycyBsaWtlIHdlYnBhY2sgb3IgUm9sbHVwLFxuLy8gYWNjb3JkaW5nIHRvIGBicm93c2VyYCBjb25maWcgaW4gYHBhY2thZ2UuanNvbmAuXG5cbmltcG9ydCB7IHVybEFscGhhYmV0IH0gZnJvbSAnLi91cmwtYWxwaGFiZXQvaW5kZXguanMnXG5cbmlmIChmYWxzZSkge1xuICAvLyBBbGwgYnVuZGxlcnMgd2lsbCByZW1vdmUgdGhpcyBibG9jayBpbiB0aGUgcHJvZHVjdGlvbiBidW5kbGUuXG4gIGlmIChcbiAgICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnUmVhY3ROYXRpdmUnICYmXG4gICAgdHlwZW9mIGNyeXB0byA9PT0gJ3VuZGVmaW5lZCdcbiAgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ1JlYWN0IE5hdGl2ZSBkb2VzIG5vdCBoYXZlIGEgYnVpbHQtaW4gc2VjdXJlIHJhbmRvbSBnZW5lcmF0b3IuICcgK1xuICAgICAgICAnSWYgeW91IGRvbuKAmXQgbmVlZCB1bnByZWRpY3RhYmxlIElEcyB1c2UgYG5hbm9pZC9ub24tc2VjdXJlYC4gJyArXG4gICAgICAgICdGb3Igc2VjdXJlIElEcywgaW1wb3J0IGByZWFjdC1uYXRpdmUtZ2V0LXJhbmRvbS12YWx1ZXNgICcgK1xuICAgICAgICAnYmVmb3JlIE5hbm8gSUQuIElmIHlvdSB1c2UgRXhwbywgaW5zdGFsbCBgZXhwby1yYW5kb21gICcgK1xuICAgICAgICAnYW5kIHVzZSBgbmFub2lkL2FzeW5jYC4nXG4gICAgKVxuICB9XG4gIGlmICh0eXBlb2YgbXNDcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjcnlwdG8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ0ltcG9ydCBmaWxlIHdpdGggYGlmICghd2luZG93LmNyeXB0bykgd2luZG93LmNyeXB0byA9IHdpbmRvdy5tc0NyeXB0b2AnICtcbiAgICAgICAgJyBiZWZvcmUgaW1wb3J0aW5nIE5hbm8gSUQgdG8gZml4IElFIDExIHN1cHBvcnQnXG4gICAgKVxuICB9XG4gIGlmICh0eXBlb2YgY3J5cHRvID09PSAndW5kZWZpbmVkJykge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdZb3VyIGJyb3dzZXIgZG9lcyBub3QgaGF2ZSBzZWN1cmUgcmFuZG9tIGdlbmVyYXRvci4gJyArXG4gICAgICAgICdJZiB5b3UgZG9u4oCZdCBuZWVkIHVucHJlZGljdGFibGUgSURzLCB5b3UgY2FuIHVzZSBuYW5vaWQvbm9uLXNlY3VyZS4nXG4gICAgKVxuICB9XG59XG5cbmxldCByYW5kb20gPSBieXRlcyA9PiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KGJ5dGVzKSlcblxubGV0IGN1c3RvbVJhbmRvbSA9IChhbHBoYWJldCwgc2l6ZSwgZ2V0UmFuZG9tKSA9PiB7XG4gIC8vIEZpcnN0LCBhIGJpdG1hc2sgaXMgbmVjZXNzYXJ5IHRvIGdlbmVyYXRlIHRoZSBJRC4gVGhlIGJpdG1hc2sgbWFrZXMgYnl0ZXNcbiAgLy8gdmFsdWVzIGNsb3NlciB0byB0aGUgYWxwaGFiZXQgc2l6ZS4gVGhlIGJpdG1hc2sgY2FsY3VsYXRlcyB0aGUgY2xvc2VzdFxuICAvLyBgMl4zMSAtIDFgIG51bWJlciwgd2hpY2ggZXhjZWVkcyB0aGUgYWxwaGFiZXQgc2l6ZS5cbiAgLy8gRm9yIGV4YW1wbGUsIHRoZSBiaXRtYXNrIGZvciB0aGUgYWxwaGFiZXQgc2l6ZSAzMCBpcyAzMSAoMDAwMTExMTEpLlxuICAvLyBgTWF0aC5jbHozMmAgaXMgbm90IHVzZWQsIGJlY2F1c2UgaXQgaXMgbm90IGF2YWlsYWJsZSBpbiBicm93c2Vycy5cbiAgbGV0IG1hc2sgPSAoMiA8PCAoTWF0aC5sb2coYWxwaGFiZXQubGVuZ3RoIC0gMSkgLyBNYXRoLkxOMikpIC0gMVxuICAvLyBUaG91Z2gsIHRoZSBiaXRtYXNrIHNvbHV0aW9uIGlzIG5vdCBwZXJmZWN0IHNpbmNlIHRoZSBieXRlcyBleGNlZWRpbmdcbiAgLy8gdGhlIGFscGhhYmV0IHNpemUgYXJlIHJlZnVzZWQuIFRoZXJlZm9yZSwgdG8gcmVsaWFibHkgZ2VuZXJhdGUgdGhlIElELFxuICAvLyB0aGUgcmFuZG9tIGJ5dGVzIHJlZHVuZGFuY3kgaGFzIHRvIGJlIHNhdGlzZmllZC5cblxuICAvLyBOb3RlOiBldmVyeSBoYXJkd2FyZSByYW5kb20gZ2VuZXJhdG9yIGNhbGwgaXMgcGVyZm9ybWFuY2UgZXhwZW5zaXZlLFxuICAvLyBiZWNhdXNlIHRoZSBzeXN0ZW0gY2FsbCBmb3IgZW50cm9weSBjb2xsZWN0aW9uIHRha2VzIGEgbG90IG9mIHRpbWUuXG4gIC8vIFNvLCB0byBhdm9pZCBhZGRpdGlvbmFsIHN5c3RlbSBjYWxscywgZXh0cmEgYnl0ZXMgYXJlIHJlcXVlc3RlZCBpbiBhZHZhbmNlLlxuXG4gIC8vIE5leHQsIGEgc3RlcCBkZXRlcm1pbmVzIGhvdyBtYW55IHJhbmRvbSBieXRlcyB0byBnZW5lcmF0ZS5cbiAgLy8gVGhlIG51bWJlciBvZiByYW5kb20gYnl0ZXMgZ2V0cyBkZWNpZGVkIHVwb24gdGhlIElEIHNpemUsIG1hc2ssXG4gIC8vIGFscGhhYmV0IHNpemUsIGFuZCBtYWdpYyBudW1iZXIgMS42ICh1c2luZyAxLjYgcGVha3MgYXQgcGVyZm9ybWFuY2VcbiAgLy8gYWNjb3JkaW5nIHRvIGJlbmNobWFya3MpLlxuXG4gIC8vIGAtfmYgPT4gTWF0aC5jZWlsKGYpYCBpZiBmIGlzIGEgZmxvYXRcbiAgLy8gYC1+aSA9PiBpICsgMWAgaWYgaSBpcyBhbiBpbnRlZ2VyXG4gIGxldCBzdGVwID0gLX4oKDEuNiAqIG1hc2sgKiBzaXplKSAvIGFscGhhYmV0Lmxlbmd0aClcblxuICByZXR1cm4gKCkgPT4ge1xuICAgIGxldCBpZCA9ICcnXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGxldCBieXRlcyA9IGdldFJhbmRvbShzdGVwKVxuICAgICAgLy8gQSBjb21wYWN0IGFsdGVybmF0aXZlIGZvciBgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGVwOyBpKyspYC5cbiAgICAgIGxldCBqID0gc3RlcFxuICAgICAgd2hpbGUgKGotLSkge1xuICAgICAgICAvLyBBZGRpbmcgYHx8ICcnYCByZWZ1c2VzIGEgcmFuZG9tIGJ5dGUgdGhhdCBleGNlZWRzIHRoZSBhbHBoYWJldCBzaXplLlxuICAgICAgICBpZCArPSBhbHBoYWJldFtieXRlc1tqXSAmIG1hc2tdIHx8ICcnXG4gICAgICAgIC8vIGBpZC5sZW5ndGggKyAxID09PSBzaXplYCBpcyBhIG1vcmUgY29tcGFjdCBvcHRpb24uXG4gICAgICAgIGlmIChpZC5sZW5ndGggPT09ICtzaXplKSByZXR1cm4gaWRcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxubGV0IGN1c3RvbUFscGhhYmV0ID0gKGFscGhhYmV0LCBzaXplKSA9PiBjdXN0b21SYW5kb20oYWxwaGFiZXQsIHNpemUsIHJhbmRvbSlcblxubGV0IG5hbm9pZCA9IChzaXplID0gMjEpID0+IHtcbiAgbGV0IGlkID0gJydcbiAgbGV0IGJ5dGVzID0gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheShzaXplKSlcblxuICAvLyBBIGNvbXBhY3QgYWx0ZXJuYXRpdmUgZm9yIGBmb3IgKHZhciBpID0gMDsgaSA8IHN0ZXA7IGkrKylgLlxuICB3aGlsZSAoc2l6ZS0tKSB7XG4gICAgLy8gSXQgaXMgaW5jb3JyZWN0IHRvIHVzZSBieXRlcyBleGNlZWRpbmcgdGhlIGFscGhhYmV0IHNpemUuXG4gICAgLy8gVGhlIGZvbGxvd2luZyBtYXNrIHJlZHVjZXMgdGhlIHJhbmRvbSBieXRlIGluIHRoZSAwLTI1NSB2YWx1ZVxuICAgIC8vIHJhbmdlIHRvIHRoZSAwLTYzIHZhbHVlIHJhbmdlLiBUaGVyZWZvcmUsIGFkZGluZyBoYWNrcywgc3VjaFxuICAgIC8vIGFzIGVtcHR5IHN0cmluZyBmYWxsYmFjayBvciBtYWdpYyBudW1iZXJzLCBpcyB1bm5lY2Nlc3NhcnkgYmVjYXVzZVxuICAgIC8vIHRoZSBiaXRtYXNrIHRyaW1zIGJ5dGVzIGRvd24gdG8gdGhlIGFscGhhYmV0IHNpemUuXG4gICAgbGV0IGJ5dGUgPSBieXRlc1tzaXplXSAmIDYzXG4gICAgaWYgKGJ5dGUgPCAzNikge1xuICAgICAgLy8gYDAtOWEtemBcbiAgICAgIGlkICs9IGJ5dGUudG9TdHJpbmcoMzYpXG4gICAgfSBlbHNlIGlmIChieXRlIDwgNjIpIHtcbiAgICAgIC8vIGBBLVpgXG4gICAgICBpZCArPSAoYnl0ZSAtIDI2KS50b1N0cmluZygzNikudG9VcHBlckNhc2UoKVxuICAgIH0gZWxzZSBpZiAoYnl0ZSA8IDYzKSB7XG4gICAgICBpZCArPSAnXydcbiAgICB9IGVsc2Uge1xuICAgICAgaWQgKz0gJy0nXG4gICAgfVxuICB9XG4gIHJldHVybiBpZFxufVxuXG5leHBvcnQgeyBuYW5vaWQsIGN1c3RvbUFscGhhYmV0LCBjdXN0b21SYW5kb20sIHVybEFscGhhYmV0LCByYW5kb20gfVxuIiwiaW1wb3J0IHsgQ291cnNlIH0gZnJvbSBcIi4vc2Nob29sL2RhdGEvQ291cnNlXCJcbmltcG9ydCB7IFRlYWNoZXIgfSBmcm9tIFwiLi9zY2hvb2wvZGF0YS9UZWFjaGVyXCJcbmltcG9ydCB7IFN0dWRlbnQgfSBmcm9tIFwiLi9zY2hvb2wvZGF0YS9TdHVkZW50XCJcbmltcG9ydCB7IFZpZXcgfSBmcm9tIFwiLi9zY2hvb2wvdmlldy9WaWV3XCJcbmltcG9ydCB7IG5hbm9pZCB9IGZyb20gXCJuYW5vaWRcIlxuOygoKSA9PiB7XG4gIGZ1bmN0aW9uIGNvbnRyb2xsZXIoKSB7XG4gICAgY29uc3QgbWlrZSA9IG5ldyBTdHVkZW50KG5hbm9pZCgpLCBcIk1pa2VcIiwgXCJTenlta293aWFrXCIsIFtdKVxuICAgIGNvbnN0IGpvbiA9IG5ldyBTdHVkZW50KG5hbm9pZCgpLCBcIkpvblwiLCBcIlNtaXRoXCIsIFtdKVxuICAgIGNvbnN0IGNsYXJhID0gbmV3IFN0dWRlbnQobmFub2lkKCksIFwiQ2xhcmFcIiwgXCJTdGVuXCIsIFtdKVxuICAgIGNvbnN0IGtpbSA9IG5ldyBTdHVkZW50KG5hbm9pZCgpLCBcIktpbVwiLCBcIkthbGxzdHJvbVwiLCBbXSlcbiAgICBjb25zdCBzdGluYSA9IG5ldyBTdHVkZW50KG5hbm9pZCgpLCBcIlN0aW5hXCIsIFwiVHVybmVyXCIsIFtdKVxuXG4gICAgY29uc3QgYm9yaXMgPSBuZXcgVGVhY2hlcihuYW5vaWQoKSwgXCJCb3Jpc1wiLCBcIkVpbnN0ZWluXCIsIFtdKVxuICAgIGNvbnN0IGxpbmRhID0gbmV3IFRlYWNoZXIobmFub2lkKCksIFwiTGluZGFcIiwgXCJTbWl0aFwiLCBbXSlcbiAgICBjb25zdCBtaWEgPSBuZXcgVGVhY2hlcihuYW5vaWQoKSwgXCJNaWFcIiwgXCJKb25zb25cIiwgW10pXG5cbiAgICBjb25zdCBtYXRoID0gbmV3IENvdXJzZShuYW5vaWQoKSwgXCJtYXRoXCIsIFtdLCBib3JpcylcbiAgICBjb25zdCBlbmdsaXNoID0gbmV3IENvdXJzZShuYW5vaWQoKSwgXCJlbmdsaXNoXCIsIFtdLCBsaW5kYSlcbiAgICBjb25zdCBzd2VkaXNoID0gbmV3IENvdXJzZShuYW5vaWQoKSwgXCJzd2VkaXNoXCIsIFtdLCBtaWEpXG4gICAgY29uc3QgaGlzdG9yeSA9IG5ldyBDb3Vyc2UobmFub2lkKCksIFwiaGlzdG9yeVwiLCBbXSwgYm9yaXMpXG5cbiAgICBtYXRoLmFkZFN0dWRlbnQobWlrZSlcbiAgICBtYXRoLmFkZFN0dWRlbnQoam9uKVxuICAgIGVuZ2xpc2guYWRkU3R1ZGVudChjbGFyYSlcbiAgICBlbmdsaXNoLmFkZFN0dWRlbnQoc3RpbmEpXG4gICAgaGlzdG9yeS5hZGRTdHVkZW50KG1pa2UpXG4gICAgaGlzdG9yeS5hZGRTdHVkZW50KHN0aW5hKVxuICAgIHN3ZWRpc2guYWRkU3R1ZGVudChraW0pXG4gICAgc3dlZGlzaC5hZGRTdHVkZW50KHN0aW5hKVxuXG4gICAgY29uc3Qgc3R1ZGVudHMgPSBbbWlrZSwgam9uLCBjbGFyYV1cbiAgICBjb25zdCB0ZWFjaGVycyA9IFtib3JpcywgbGluZGEsIG1pYV1cbiAgICBjb25zdCBjb3Vyc2VzID0gW21hdGgsIGVuZ2xpc2gsIHN3ZWRpc2hdXG5cbiAgICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgICAgY29uc3QgdiA9IG5ldyBWaWV3KHN0dWRlbnRzLCBjb3Vyc2VzLCB0ZWFjaGVycylcbiAgICAgIHYucmVuZGVyKClcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaW5pdCxcbiAgICB9XG4gIH1cbiAgY29udHJvbGxlcigpLmluaXQoKVxufSkoKVxuIl0sInNvdXJjZVJvb3QiOiIifQ==