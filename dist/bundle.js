(()=>{"use strict";var e,t,n=function(e){var t=e.id,n=e.firstName,i=e.lastName,a=e.email,r=e.age,o=e.type;return{id:t,firstName:n,lastName:i,email:a,age:r,type:o,showCase:function(){return{name:n+" "+i,email:a,age:""+r}}}},i=[n({id:1,firstName:"mark",lastName:"smith",email:"mark@io.com",age:37,type:"t"}),n({id:2,firstName:"george",lastName:"pierre",email:"pierre@io.com",age:48,type:"t"}),n({id:3,firstName:"carl",lastName:"carl",email:"carl@io.com",age:36,type:"t"}),n({id:4,firstName:"bob",lastName:"rooney",email:"bob@io.com",age:31,type:"t"})],a=function(e,t,n,i){var a=function(){return'   \n    <div class="table-wrapper wrapper-'+n+'">\n    <table class="'+n+'">\n        <caption>'+n+"</caption>\n        <thead>\n          "+i.map((function(e){return"<th>"+e+"</th>"})).join("")+"\n        </thead>\n        <tbody>\n          "+t.map((function(e){var t=e.showCase();return'\n                <tr data-id="'+e.id+'" id="'+("s"===e.type?"student-"+e.id:"t"===e.type?"teacher-"+e.id:"course-"+e.id)+'">\n                '+Object.keys(t).map((function(e){return'<td data-info="'+t[e]+'">'+t[e]+"</td>"})).join("")+"\n                </tr>\n          "})).join("")+"\n        </tbody>\n      </table>\n    </div>\n    "};return{init:function(){e.innerHTML=a()},rawHtml:a,onClick:function(e){document.querySelectorAll("tr").forEach((function(t){return t.addEventListener("click",(function(){"student"===t.id.split("-")[0]&&e(parseInt(t.dataset.id,10))}))}))}}},r=function(e,t,n,i){return{id:e,title:t,about:n,duration:i,showCase:function(){return{title:t,duration:i}}}},o=[r(1,"french","french class","5h"),r(2,"history","history class","3h"),r(3,"math","math class","4h"),r(4,"english","english class","3h")],s=function(e){var t=e.id,n=e.firstName,i=e.lastName,a=e.email,r=e.age,o=e.type;return{id:t,firstName:n,lastName:i,email:a,age:r,type:o,showCase:function(){return{name:n+" "+i,email:a,age:""+r}}}},m=[s({id:1,firstName:"bob",lastName:"smith",email:"bob@io.com",age:17,type:"s"}),s({id:2,firstName:"joe",lastName:"jonsson",email:"joe@io.com",age:18,type:"s"}),s({id:3,firstName:"philip",lastName:"oconnor",email:"ph@io.com",age:16,type:"s"}),s({id:4,firstName:"anna",lastName:"franklin",email:"anna@io.com",age:21,type:"s"})],c=new(function(){function e(){this.collection={},this.messages=[]}return e.prototype.register=function(e){this.collection[e.name]=e,e.adminMediator=this},e.prototype.send=function(e,t){this.messages.push({message:e,from:t})},e}()),l=function(){function e(e){this.name=e,this.adminMediator=null}return e.prototype.send=function(e){var t;null===(t=this.adminMediator)||void 0===t||t.send(e,this)},e}(),d=function(e,t,n,i,r){var o=a(e,n,i,r),s="",m=function(){!function(){var n;e.classList.add("show-modal");var i='\n    <div class="modal-container">\n      '+o.rawHtml()+"\n      "+s+'\n      <button class="close-modal">\n        ‚ùå\n      </button>\n    </div>\n    ';e.innerHTML=i,null===(n=document.querySelector(".close-modal"))||void 0===n||n.addEventListener("click",(function(){e.classList.remove("show-modal")}));var a=new l(t.firstName);c.register(a);var r=document.querySelectorAll(".modal tbody tr td");Array.from(r).forEach((function(e){var n=e.dataset.info;"english"!==n&&"french"!==n&&"history"!==n&&"math"!==n||e.addEventListener("click",(function(e){a.send("Student "+t.firstName+" "+t.lastName+" has been registered for the course "+n);var i="You have now been registered to the "+e.target.innerText+" Course";s=i,console.log(c),m()}))}))}()};return{init:m}};(function(e){void 0===e&&(e=document.querySelector(".main"));var t=a(e,m,"students",["name","email","age"]),n=function(e){var t=m.find((function(t){return t.id===e})),n=document.querySelector(".modal");d(n,t,o,"courses",["title","duration"]).init()};return{init:function(){t.init(),t.onClick(n)}}})(document.getElementById("students")).init(),(e=document.getElementById("teachers"),t=a(e,i,"teachers",["name","email","age"]),{init:function(){t.init()}}).init(),function(e){var t,n,i,a,r,o=function(e,t){var n=new l(t.firstName),i=[],a=function(){return i=c.messages},r=function(){!function(){var t='\n      <div class="admin-wrapper wrapper-'+n.name+'">\n      <button id="admin-profile-btn" class="button">Info</button>\n      <div class="admin-content">\n        <h3> Mr Admin '+n.name+"</h3>\n        <p>"+n.name+'</p>\n        <ul class="admin-messages-list">\n          '+(i.length>0?i.map((function(e){return" <li>"+e.message+"</li> "})).join(""):"<p>No registered students YET!</p>")+"\n        </ul>\n        </div>\n\n    </div>\n      ";e.innerHTML=t,a();var o=document.getElementById("admin-profile-btn");null==o||o.addEventListener("click",(function(){a(),r()}))}()};return{init:r}}(e,{id:(t={id:204,firstName:"Bruce",lastName:"Wayne",age:45,email:"batman@io.com",type:"a"}).id,firstName:n=t.firstName,lastName:i=t.lastName,email:a=t.email,age:r=t.age,type:t.type,showCase:function(){return{name:n+" "+i,email:a,age:""+r}}});return{init:function(){o.init()}}}(document.getElementById("admin")).init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy93ZXNjb2FzdDMuMC9tb2RlbHMvdGVhY2hlci50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy93ZXNjb2FzdDMuMC9jb250cm9sbGVycy90ZWFjaGVyLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3dlc2NvYXN0My4wL3ZpZXdzL2xpc3Qtdmlldy50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy93ZXNjb2FzdDMuMC9tb2RlbHMvY291cnNlLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3dlc2NvYXN0My4wL21vZGVscy9zdHVkZW50LnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3dlc2NvYXN0My4wL21lZGlhdG9yL21haW4udHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvd2VzY29hc3QzLjAvbWVkaWF0b3Ivc2VydmljZS50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy93ZXNjb2FzdDMuMC92aWV3cy9tb2RhbC12aWV3LnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3dlc2NvYXN0My4wL2NvbnRyb2xsZXJzL3N0dWRlbnQudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvd2VzY29hc3QzLjAvY29udHJvbGxlcnMvYWRtaW4udHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvd2VzY29hc3QzLjAvbW9kZWxzL2FkbWluLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3dlc2NvYXN0My4wL3ZpZXdzL2FkbWluLXZpZXcudHMiXSwibmFtZXMiOlsicGFyZW50RWxlbWVudCIsInZpZXciLCJ0ZWFjaGVyIiwiaWQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwiYWdlIiwidHlwZSIsInNob3dDYXNlIiwibmFtZSIsInRlYWNoZXJzIiwibGlzdFZpZXciLCJ4cyIsInRpdGxlIiwic3ViVGl0bGVzIiwicmF3SHRtbCIsIm1hcCIsInQiLCJqb2luIiwiZGF0YSIsIk9iamVjdCIsImtleXMiLCJrZXkiLCJpbml0IiwiaW5uZXJIVE1MIiwib25DbGljayIsImhhbmRsZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwidHIiLCJhZGRFdmVudExpc3RlbmVyIiwic3BsaXQiLCJwYXJzZUludCIsImRhdGFzZXQiLCJjb3Vyc2UiLCJhYm91dCIsImR1cmF0aW9uIiwiY291cnNlcyIsInN0dWRlbnQiLCJzdHVkZW50cyIsImFkbWluTWVkaWF0b3IiLCJ0aGlzIiwiY29sbGVjdGlvbiIsIm1lc3NhZ2VzIiwicmVnaXN0ZXIiLCJzZXJ2aWNlIiwic2VuZCIsIm1lc3NhZ2UiLCJmcm9tIiwicHVzaCIsIm1vZGFsVmlldyIsInBlcnNvbiIsIm1lc3NhZ2VGb3JQZXJzb24iLCJjbGFzc0xpc3QiLCJhZGQiLCJodG1sIiwicXVlcnlTZWxlY3RvciIsInJlbW92ZSIsInN0dWRlbnRTZXJ2aWNlIiwiU2VydmljZSIsInRkcyIsIkFycmF5IiwidGQiLCJpbmZvIiwiZXZlbnQiLCJjb25maXJtYXRpb25UZXh0IiwidGFyZ2V0IiwiaW5uZXJUZXh0IiwiY29uc29sZSIsImxvZyIsInJlbmRlciIsImdldFN0dWRlbnQiLCJmaW5kIiwibW9kYWwiLCJzdHVkZW50Q29udHJvbGxlciIsImdldEVsZW1lbnRCeUlkIiwiYWRtaW4iLCJhZG1pblNlcnZpY2UiLCJnZXRBZG1pbk1lc3NhZ2VzIiwibGVuZ3RoIiwieCIsImJ0biIsImFkbWluVmlldyIsImFkbWluQ29udHJvbGxlciJdLCJtYXBwaW5ncyI6Im1CQUVBLElDQzJCQSxFQUNuQkMsRURGRkMsRUFBVSxTQUFDLEcsSUFBRUMsRUFBRSxLQUFFQyxFQUFTLFlBQUVDLEVBQVEsV0FBRUMsRUFBSyxRQUFFQyxFQUFHLE1BQUVDLEVBQUksT0FTMUQsTUFB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Q2hELElBQU1DLEVBQWUsSUFBSWxCLEVBQVFpQixFQUFNMUUsV0FFbkNTLEVBQTRDLEdBRTFDbUUsRUFBbUIsV0FHdkIsT0FGQW5FLEVBQUs2QixFQUFjRyxVQW1DZnJCLEVBQU8sWUE5QkUsV0FDYixJQUFNaUMsRUFBTyw2Q0FDeUJzQixFQUFhckUsS0FBSSxtSUFHbkNxRSxFQUFhckUsS0FBSSxxQkFDNUJxRSxFQUFhckUsS0FBSSw4REFHbEJHLEVBQUdvRSxPQUFTLEVBQ1JwRSxFQUFHSSxLQUFJLFNBQUFpRSxHQUFLLGNBQVFBLEVBQUVqQyxRQUFPLFlBQVU5QixLQUFLLElBQzVDLHNDQUFvQyx3REFRaERuQixFQUFjeUIsVUFBWWdDLEVBQzFCdUIsSUFFQSxJQUFNRyxFQUFNdkQsU0FBU2lELGVBQWUscUJBRXBDTSxXQUFLbkQsaUJBQWlCLFNBQVMsV0FDN0JnRCxJQUNBeEQsT0FLRmdELElBR0YsTUFBTyxDQUNMaEQsS0FBSSxHRjlDTzRELENBQ1hwRixFQ01LLENBQ0xHLElBVlcsRURJRSxDQUNYQSxHQUFJLElBQ0pDLFVBQVcsUUFDWEMsU0FBVSxRQUNWRSxJQUFLLEdBQ0xELE1BQU8sZ0JBQ1BFLEtBQU0sTUNWTyxHQVdmSixVQVhpQkEsRUFBUyxZQVkxQkMsU0FaNEJBLEVBQVEsV0FhcENDLE1BYnNDQSxFQUFLLFFBYzNDQyxJQWQ2Q0EsRUFBRyxNQWVoREMsS0Fmc0QsT0FnQnREQyxTQWZlLFdBQ2YsTUFBTyxDQUNMQyxLQUFTTixFQUFTLElBQUlDLEVBQ3RCQyxNQUFLLEVBQ0xDLElBQUssR0FBR0EsTURpQlosTUFBTyxDQUNMaUIsS0FMVyxXQUhYdkIsRUFBS3VCLFNEWFA2RCxDQUFnQnpELFNBQVNpRCxlQUFlLFVBQTRCckQsUSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQZXJzb24gfSBmcm9tIFwiLi4vdHlwZXNcIlxuXG5jb25zdCB0ZWFjaGVyID0gKHsgaWQsIGZpcnN0TmFtZSwgbGFzdE5hbWUsIGVtYWlsLCBhZ2UsIHR5cGUgfTogUGVyc29uKSA9PiB7XG4gIGNvbnN0IHNob3dDYXNlID0gKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBgJHtmaXJzdE5hbWV9ICR7bGFzdE5hbWV9YCxcbiAgICAgIGVtYWlsLFxuICAgICAgYWdlOiBgJHthZ2V9YCxcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGlkLFxuICAgIGZpcnN0TmFtZSxcbiAgICBsYXN0TmFtZSxcbiAgICBlbWFpbCxcbiAgICBhZ2UsXG4gICAgdHlwZSxcbiAgICBzaG93Q2FzZSxcbiAgfVxufVxuXG5jb25zdCB0ZWFjaGVycyA9IFtcbiAgdGVhY2hlcih7IGlkOiAxLCBmaXJzdE5hbWU6IFwibWFya1wiLCBsYXN0TmFtZTogXCJzbWl0aFwiLCBlbWFpbDogXCJtYXJrQGlvLmNvbVwiLCBhZ2U6IDM3LCB0eXBlOiBcInRcIiB9KSxcbiAgdGVhY2hlcih7IGlkOiAyLCBmaXJzdE5hbWU6IFwiZ2VvcmdlXCIsIGxhc3ROYW1lOiBcInBpZXJyZVwiLCBlbWFpbDogXCJwaWVycmVAaW8uY29tXCIsIGFnZTogNDgsIHR5cGU6IFwidFwiIH0pLFxuICB0ZWFjaGVyKHsgaWQ6IDMsIGZpcnN0TmFtZTogXCJjYXJsXCIsIGxhc3ROYW1lOiBcImNhcmxcIiwgZW1haWw6IFwiY2FybEBpby5jb21cIiwgYWdlOiAzNiwgdHlwZTogXCJ0XCIgfSksXG4gIHRlYWNoZXIoeyBpZDogNCwgZmlyc3ROYW1lOiBcImJvYlwiLCBsYXN0TmFtZTogXCJyb29uZXlcIiwgZW1haWw6IFwiYm9iQGlvLmNvbVwiLCBhZ2U6IDMxLCB0eXBlOiBcInRcIiB9KSxcbl1cblxudHlwZSBUZWFjaGVyID0gdHlwZW9mIHRlYWNoZXJcblxuZXhwb3J0IHsgdGVhY2hlciwgdGVhY2hlcnMsIFRlYWNoZXIgfVxuIiwiaW1wb3J0IHsgdGVhY2hlcnMgfSBmcm9tIFwiLi4vbW9kZWxzL3RlYWNoZXJcIlxuaW1wb3J0IHsgbGlzdFZpZXcgfSBmcm9tIFwiLi4vdmlld3MvbGlzdC12aWV3XCJcblxuY29uc3QgdGVhY2hlckNvbnRyb2xsZXIgPSAocGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnQpID0+IHtcbiAgY29uc3QgdmlldyA9IGxpc3RWaWV3KHBhcmVudEVsZW1lbnQsIHRlYWNoZXJzLCBcInRlYWNoZXJzXCIsIFtcIm5hbWVcIiwgXCJlbWFpbFwiLCBcImFnZVwiXSlcblxuICBjb25zdCByZW5kZXIgPSAoKSA9PiB7XG4gICAgdmlldy5pbml0KClcbiAgfVxuXG4gIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgcmVuZGVyKClcbiAgfVxuICByZXR1cm4ge1xuICAgIGluaXQsXG4gIH1cbn1cblxuZXhwb3J0IHsgdGVhY2hlckNvbnRyb2xsZXIgfVxuIiwiY29uc3QgbGlzdFZpZXcgPSA8VD4ocGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnQsIHhzOiBUW10sIHRpdGxlOiBzdHJpbmcsIHN1YlRpdGxlczogc3RyaW5nW10pID0+IHtcbiAgY29uc3QgcmF3SHRtbCA9ICgpID0+XG4gICAgYCAgIFxuICAgIDxkaXYgY2xhc3M9XCJ0YWJsZS13cmFwcGVyIHdyYXBwZXItJHt0aXRsZX1cIj5cbiAgICA8dGFibGUgY2xhc3M9XCIke3RpdGxlfVwiPlxuICAgICAgICA8Y2FwdGlvbj4ke3RpdGxlfTwvY2FwdGlvbj5cbiAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICR7c3ViVGl0bGVzLm1hcCh0ID0+IGA8dGg+JHt0fTwvdGg+YCkuam9pbihcIlwiKX1cbiAgICAgICAgPC90aGVhZD5cbiAgICAgICAgPHRib2R5PlxuICAgICAgICAgICR7eHNcbiAgICAgICAgICAgIC5tYXAoKGRhdGE6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBzaG93Q2FzZSA9IGRhdGEuc2hvd0Nhc2UoKVxuICAgICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgICAgIDx0ciBkYXRhLWlkPVwiJHtkYXRhLmlkfVwiIGlkPVwiJHtcbiAgICAgICAgICAgICAgICBkYXRhLnR5cGUgPT09IFwic1wiXG4gICAgICAgICAgICAgICAgICA/IGBzdHVkZW50LSR7ZGF0YS5pZH1gXG4gICAgICAgICAgICAgICAgICA6IGRhdGEudHlwZSA9PT0gXCJ0XCJcbiAgICAgICAgICAgICAgICAgID8gYHRlYWNoZXItJHtkYXRhLmlkfWBcbiAgICAgICAgICAgICAgICAgIDogYGNvdXJzZS0ke2RhdGEuaWR9YFxuICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgICAgJHtPYmplY3Qua2V5cyhzaG93Q2FzZSlcbiAgICAgICAgICAgICAgICAgIC5tYXAoa2V5ID0+IGA8dGQgZGF0YS1pbmZvPVwiJHtzaG93Q2FzZVtrZXldfVwiPiR7c2hvd0Nhc2Vba2V5XX08L3RkPmApXG4gICAgICAgICAgICAgICAgICAuam9pbihcIlwiKX1cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgIGBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbihcIlwiKX1cbiAgICAgICAgPC90Ym9keT5cbiAgICAgIDwvdGFibGU+XG4gICAgPC9kaXY+XG4gICAgYFxuXG4gIGNvbnN0IHJlbmRlciA9ICgpID0+IHtcbiAgICBwYXJlbnRFbGVtZW50LmlubmVySFRNTCA9IHJhd0h0bWwoKVxuICB9XG5cbiAgY29uc3Qgb25DbGljayA9IChoYW5kbGVyOiBGdW5jdGlvbikgPT4ge1xuICAgIGNvbnN0IHRycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0clwiKVxuICAgIHRycy5mb3JFYWNoKHRyID0+XG4gICAgICB0ci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBbdHlwZV0gPSB0ci5pZC5zcGxpdChcIi1cIilcbiAgICAgICAgaWYgKHR5cGUgPT09IFwic3R1ZGVudFwiKSB7XG4gICAgICAgICAgaGFuZGxlcihwYXJzZUludCh0ci5kYXRhc2V0LmlkISwgMTApKVxuICAgICAgICB9XG4gICAgICAgIC8vIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJ1c2VyXCIsIFN0cmluZyh0ci5kYXRhc2V0LmlkKSlcbiAgICAgIH0pXG4gICAgKVxuICB9XG5cbiAgY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICByZW5kZXIoKVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0LFxuICAgIHJhd0h0bWwsXG4gICAgb25DbGljayxcbiAgfVxufVxuXG5leHBvcnQgeyBsaXN0VmlldyB9XG4iLCJpbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSBcIi4uL3R5cGVzXCJcblxuY29uc3QgY291cnNlID0gKGlkOiBudW1iZXIsIHRpdGxlOiBTdWJqZWN0LCBhYm91dDogc3RyaW5nLCBkdXJhdGlvbjogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IHNob3dDYXNlID0gKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICB0aXRsZSxcbiAgICAgIGR1cmF0aW9uLFxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaWQsXG4gICAgdGl0bGUsXG4gICAgYWJvdXQsXG4gICAgZHVyYXRpb24sXG4gICAgc2hvd0Nhc2UsXG4gIH1cbn1cblxudHlwZSBDb3Vyc2VUeXBlID0gdHlwZW9mIGNvdXJzZVxuXG5jb25zdCBjb3Vyc2VzID0gW1xuICBjb3Vyc2UoMSwgXCJmcmVuY2hcIiwgXCJmcmVuY2ggY2xhc3NcIiwgXCI1aFwiKSxcbiAgY291cnNlKDIsIFwiaGlzdG9yeVwiLCBcImhpc3RvcnkgY2xhc3NcIiwgXCIzaFwiKSxcbiAgY291cnNlKDMsIFwibWF0aFwiLCBcIm1hdGggY2xhc3NcIiwgXCI0aFwiKSxcbiAgY291cnNlKDQsIFwiZW5nbGlzaFwiLCBcImVuZ2xpc2ggY2xhc3NcIiwgXCIzaFwiKSxcbl1cblxuZXhwb3J0IHsgY291cnNlLCBjb3Vyc2VzLCBDb3Vyc2VUeXBlIH1cbiIsImltcG9ydCB7IFBlcnNvbiB9IGZyb20gXCIuLi90eXBlc1wiXG5cbmNvbnN0IHN0dWRlbnQgPSAoeyBpZCwgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwsIGFnZSwgdHlwZSB9OiBQZXJzb24pID0+IHtcbiAgY29uc3Qgc2hvd0Nhc2UgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IGAke2ZpcnN0TmFtZX0gJHtsYXN0TmFtZX1gLFxuICAgICAgZW1haWwsXG4gICAgICBhZ2U6IGAke2FnZX1gLFxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaWQsXG4gICAgZmlyc3ROYW1lLFxuICAgIGxhc3ROYW1lLFxuICAgIGVtYWlsLFxuICAgIGFnZSxcbiAgICB0eXBlLFxuICAgIHNob3dDYXNlLFxuICB9XG59XG5cbnR5cGUgU3R1ZGVudCA9IHR5cGVvZiBzdHVkZW50XG5jb25zdCBzdHVkZW50cyA9IFtcbiAgc3R1ZGVudCh7IGlkOiAxLCBmaXJzdE5hbWU6IFwiYm9iXCIsIGxhc3ROYW1lOiBcInNtaXRoXCIsIGVtYWlsOiBcImJvYkBpby5jb21cIiwgYWdlOiAxNywgdHlwZTogXCJzXCIgfSksXG4gIHN0dWRlbnQoeyBpZDogMiwgZmlyc3ROYW1lOiBcImpvZVwiLCBsYXN0TmFtZTogXCJqb25zc29uXCIsIGVtYWlsOiBcImpvZUBpby5jb21cIiwgYWdlOiAxOCwgdHlwZTogXCJzXCIgfSksXG4gIHN0dWRlbnQoeyBpZDogMywgZmlyc3ROYW1lOiBcInBoaWxpcFwiLCBsYXN0TmFtZTogXCJvY29ubm9yXCIsIGVtYWlsOiBcInBoQGlvLmNvbVwiLCBhZ2U6IDE2LCB0eXBlOiBcInNcIiB9KSxcbiAgc3R1ZGVudCh7IGlkOiA0LCBmaXJzdE5hbWU6IFwiYW5uYVwiLCBsYXN0TmFtZTogXCJmcmFua2xpblwiLCBlbWFpbDogXCJhbm5hQGlvLmNvbVwiLCBhZ2U6IDIxLCB0eXBlOiBcInNcIiB9KSxcbl1cblxuZXhwb3J0IHsgc3R1ZGVudCwgc3R1ZGVudHMsIFN0dWRlbnQgfVxuIiwiaW1wb3J0IHsgU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VcIlxuXG5leHBvcnQgY2xhc3MgQWRtaW5NZWRpYXRvciB7XG4gIGNvbGxlY3Rpb246IFJlY29yZDxzdHJpbmcsIFNlcnZpY2U+XG4gIG1lc3NhZ2VzOiBhbnlbXVxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbGxlY3Rpb24gPSB7fVxuICAgIHRoaXMubWVzc2FnZXMgPSBbXVxuICB9XG4gIHJlZ2lzdGVyKHNlcnZpY2U6IFNlcnZpY2UpIHtcbiAgICB0aGlzLmNvbGxlY3Rpb25bc2VydmljZS5uYW1lXSA9IHNlcnZpY2VcbiAgICBzZXJ2aWNlLmFkbWluTWVkaWF0b3IgPSB0aGlzXG4gIH1cblxuICBzZW5kKG1lc3NhZ2U6IHN0cmluZywgZnJvbTogYW55KSB7XG4gICAgdGhpcy5tZXNzYWdlcy5wdXNoKHsgbWVzc2FnZSwgZnJvbSB9KVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBhZG1pbk1lZGlhdG9yID0gbmV3IEFkbWluTWVkaWF0b3IoKVxuIiwiaW1wb3J0IHsgQWRtaW5NZWRpYXRvciB9IGZyb20gXCIuL21haW5cIlxuXG5jbGFzcyBTZXJ2aWNlIHtcbiAgbmFtZTogc3RyaW5nXG4gIGFkbWluTWVkaWF0b3I6IEFkbWluTWVkaWF0b3IgfCBudWxsXG5cbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZVxuICAgIHRoaXMuYWRtaW5NZWRpYXRvciA9IG51bGxcbiAgfVxuXG4gIHNlbmQobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgdGhpcy5hZG1pbk1lZGlhdG9yPy5zZW5kKG1lc3NhZ2UsIHRoaXMpXG4gIH1cbn1cblxuZXhwb3J0IHsgU2VydmljZSB9XG4iLCJpbXBvcnQgeyBhZG1pbk1lZGlhdG9yIH0gZnJvbSBcIi4uL21lZGlhdG9yL21haW5cIlxuaW1wb3J0IHsgU2VydmljZSB9IGZyb20gXCIuLi9tZWRpYXRvci9zZXJ2aWNlXCJcbmltcG9ydCB7IFBlcnNvbiwgU3ViamVjdCB9IGZyb20gXCIuLi90eXBlc1wiXG5pbXBvcnQgeyBsaXN0VmlldyB9IGZyb20gXCIuL2xpc3Qtdmlld1wiXG5cbmV4cG9ydCBpbnRlcmZhY2UgTGlzdGVuZXI8VD4ge1xuICBldmVudDogeyB0YXJnZXQ6IFQgfVxufVxuXG5jb25zdCBtb2RhbFZpZXcgPSA8VD4oXG4gIHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LFxuICBwZXJzb246IFBlcnNvbixcbiAgeHM6IFRbXSxcbiAgdGl0bGU6IHN0cmluZyxcbiAgc3ViVGl0bGVzOiBzdHJpbmdbXVxuKSA9PiB7XG4gIGNvbnN0IHZpZXcgPSBsaXN0VmlldyhwYXJlbnRFbGVtZW50LCB4cywgdGl0bGUsIHN1YlRpdGxlcylcblxuICBsZXQgbWVzc2FnZUZvclBlcnNvbiA9IFwiXCJcbiAgY29uc3QgdXBkYXRlVGV4dCA9IChtc2c6IHN0cmluZykgPT4ge1xuICAgIG1lc3NhZ2VGb3JQZXJzb24gPSBtc2dcbiAgfVxuICBjb25zdCB1cGRhdGVBZG1pbk1lZGlhdG9yID0gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGFkbWluTWVkaWF0b3IpXG4gIH1cblxuICBjb25zdCByZW5kZXIgPSAoKSA9PiB7XG4gICAgcGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic2hvdy1tb2RhbFwiKVxuICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRhaW5lclwiPlxuICAgICAgJHt2aWV3LnJhd0h0bWwoKX1cbiAgICAgICR7bWVzc2FnZUZvclBlcnNvbn1cbiAgICAgIDxidXR0b24gY2xhc3M9XCJjbG9zZS1tb2RhbFwiPlxuICAgICAgICDinYxcbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICAgIGBcbiAgICBwYXJlbnRFbGVtZW50LmlubmVySFRNTCA9IGh0bWxcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlLW1vZGFsXCIpPy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgcGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy1tb2RhbFwiKVxuICAgIH0pXG4gICAgY29uc3Qgc3R1ZGVudFNlcnZpY2UgPSBuZXcgU2VydmljZShwZXJzb24uZmlyc3ROYW1lKVxuICAgIGFkbWluTWVkaWF0b3IucmVnaXN0ZXIoc3R1ZGVudFNlcnZpY2UpXG4gICAgY29uc3QgdGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbCB0Ym9keSB0ciB0ZFwiKSBhcyBOb2RlTGlzdFxuXG4gICAgQXJyYXkuZnJvbSh0ZHMpLmZvckVhY2godGQgPT4ge1xuICAgICAgY29uc3QgdGRFbGVtZW50ID0gdGQgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGNvbnN0IGluZm8gPSB0ZEVsZW1lbnQuZGF0YXNldC5pbmZvIGFzIFN1YmplY3RcblxuICAgICAgaWYgKGluZm8gPT09IFwiZW5nbGlzaFwiIHx8IGluZm8gPT09IFwiZnJlbmNoXCIgfHwgaW5mbyA9PT0gXCJoaXN0b3J5XCIgfHwgaW5mbyA9PT0gXCJtYXRoXCIpIHtcbiAgICAgICAgdGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudDogYW55KSA9PiB7XG4gICAgICAgICAgc3R1ZGVudFNlcnZpY2Uuc2VuZChcbiAgICAgICAgICAgIGBTdHVkZW50ICR7cGVyc29uLmZpcnN0TmFtZX0gJHtwZXJzb24ubGFzdE5hbWV9IGhhcyBiZWVuIHJlZ2lzdGVyZWQgZm9yIHRoZSBjb3Vyc2UgJHtpbmZvfWBcbiAgICAgICAgICApXG5cbiAgICAgICAgICBjb25zdCBjb25maXJtYXRpb25UZXh0ID0gYFlvdSBoYXZlIG5vdyBiZWVuIHJlZ2lzdGVyZWQgdG8gdGhlICR7ZXZlbnQudGFyZ2V0LmlubmVyVGV4dH0gQ291cnNlYFxuICAgICAgICAgIHVwZGF0ZVRleHQoY29uZmlybWF0aW9uVGV4dClcblxuICAgICAgICAgIHVwZGF0ZUFkbWluTWVkaWF0b3IoKVxuICAgICAgICAgIGluaXQoKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgIHJlbmRlcigpXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGluaXQsXG4gIH1cbn1cblxuZXhwb3J0IHsgbW9kYWxWaWV3IH1cbiIsImltcG9ydCB7IGNvdXJzZXMgfSBmcm9tIFwiLi4vbW9kZWxzL2NvdXJzZVwiXG5pbXBvcnQgeyBzdHVkZW50cyB9IGZyb20gXCIuLi9tb2RlbHMvc3R1ZGVudFwiXG5pbXBvcnQgeyBQZXJzb24gfSBmcm9tIFwiLi4vdHlwZXNcIlxuaW1wb3J0IHsgbGlzdFZpZXcgfSBmcm9tIFwiLi4vdmlld3MvbGlzdC12aWV3XCJcbmltcG9ydCB7IG1vZGFsVmlldyB9IGZyb20gXCIuLi92aWV3cy9tb2RhbC12aWV3XCJcblxuY29uc3Qgc3R1ZGVudENvbnRyb2xsZXIgPSAoXG4gIHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluXCIpIGFzIEhUTUxEaXZFbGVtZW50XG4pID0+IHtcbiAgY29uc3QgdmlldyA9IGxpc3RWaWV3KHBhcmVudEVsZW1lbnQsIHN0dWRlbnRzLCBcInN0dWRlbnRzXCIsIFtcIm5hbWVcIiwgXCJlbWFpbFwiLCBcImFnZVwiXSlcblxuICBjb25zdCByZW5kZXIgPSAoKSA9PiB7XG4gICAgdmlldy5pbml0KClcbiAgfVxuXG4gIGNvbnN0IGdldFN0dWRlbnQgPSAoaWQ6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHN0dWRlbnQgPSBzdHVkZW50cy5maW5kKHN0dWRlbnQgPT4gc3R1ZGVudC5pZCA9PT0gaWQpIGFzIFBlcnNvblxuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKSBhcyBIVE1MRGl2RWxlbWVudFxuICAgIG1vZGFsVmlldyhtb2RhbCwgc3R1ZGVudCwgY291cnNlcywgXCJjb3Vyc2VzXCIsIFtcInRpdGxlXCIsIFwiZHVyYXRpb25cIl0pLmluaXQoKVxuICB9XG5cbiAgY29uc3QgaGFuZGxlQ2xpY2sgPSAoKSA9PiB7XG4gICAgdmlldy5vbkNsaWNrKGdldFN0dWRlbnQpXG4gIH1cblxuICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgIHJlbmRlcigpXG4gICAgaGFuZGxlQ2xpY2soKVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0LFxuICB9XG59XG5cbmV4cG9ydCB7IHN0dWRlbnRDb250cm9sbGVyIH1cbiIsImltcG9ydCB7IHRlYWNoZXJDb250cm9sbGVyIH0gZnJvbSBcIi4vd2VzY29hc3QzLjAvY29udHJvbGxlcnMvdGVhY2hlclwiXG5pbXBvcnQgeyBzdHVkZW50Q29udHJvbGxlciB9IGZyb20gXCIuL3dlc2NvYXN0My4wL2NvbnRyb2xsZXJzL3N0dWRlbnRcIlxuaW1wb3J0IHsgYWRtaW5Db250cm9sbGVyIH0gZnJvbSBcIi4vd2VzY29hc3QzLjAvY29udHJvbGxlcnMvYWRtaW5cIlxuOygoKSA9PiB7XG4gIHN0dWRlbnRDb250cm9sbGVyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3R1ZGVudHNcIikgYXMgSFRNTERpdkVsZW1lbnQpLmluaXQoKVxuICB0ZWFjaGVyQ29udHJvbGxlcihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRlYWNoZXJzXCIpIGFzIEhUTUxEaXZFbGVtZW50KS5pbml0KClcbiAgYWRtaW5Db250cm9sbGVyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRtaW5cIikgYXMgSFRNTERpdkVsZW1lbnQpLmluaXQoKVxufSkoKVxuIiwiaW1wb3J0IHsgYWRtaW4gYXMgYWRtaW5DcmVhdG9yIH0gZnJvbSBcIi4uL21vZGVscy9hZG1pblwiXG5pbXBvcnQgeyBhZG1pblZpZXcgfSBmcm9tIFwiLi4vdmlld3MvYWRtaW4tdmlld1wiXG5cbmNvbnN0IGFkbWluQ29udHJvbGxlciA9IChwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudCkgPT4ge1xuICBjb25zdCB2aWV3ID0gYWRtaW5WaWV3KFxuICAgIHBhcmVudEVsZW1lbnQsXG4gICAgYWRtaW5DcmVhdG9yKHtcbiAgICAgIGlkOiAyMDQsXG4gICAgICBmaXJzdE5hbWU6IFwiQnJ1Y2VcIixcbiAgICAgIGxhc3ROYW1lOiBcIldheW5lXCIsXG4gICAgICBhZ2U6IDQ1LFxuICAgICAgZW1haWw6IFwiYmF0bWFuQGlvLmNvbVwiLFxuICAgICAgdHlwZTogXCJhXCIsXG4gICAgfSlcbiAgKVxuXG4gIGNvbnN0IHJlbmRlciA9ICgpID0+IHtcbiAgICB2aWV3LmluaXQoKVxuICB9XG5cbiAgY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICByZW5kZXIoKVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0LFxuICB9XG59XG5cbmV4cG9ydCB7IGFkbWluQ29udHJvbGxlciB9XG4iLCJpbXBvcnQgeyBQZXJzb24gfSBmcm9tIFwiLi4vdHlwZXNcIlxuXG5jb25zdCBhZG1pbiA9ICh7IGlkLCBmaXJzdE5hbWUsIGxhc3ROYW1lLCBlbWFpbCwgYWdlLCB0eXBlIH06IFBlcnNvbikgPT4ge1xuICBjb25zdCBzaG93Q2FzZSA9ICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogYCR7Zmlyc3ROYW1lfSAke2xhc3ROYW1lfWAsXG4gICAgICBlbWFpbCxcbiAgICAgIGFnZTogYCR7YWdlfWAsXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpZCxcbiAgICBmaXJzdE5hbWUsXG4gICAgbGFzdE5hbWUsXG4gICAgZW1haWwsXG4gICAgYWdlLFxuICAgIHR5cGUsXG4gICAgc2hvd0Nhc2UsXG4gIH1cbn1cblxuZXhwb3J0IHsgYWRtaW4gfVxuIiwiaW1wb3J0IHsgQWRtaW5NZWRpYXRvciwgYWRtaW5NZWRpYXRvciB9IGZyb20gXCIuLi9tZWRpYXRvci9tYWluXCJcbmltcG9ydCB7IFNlcnZpY2UgfSBmcm9tIFwiLi4vbWVkaWF0b3Ivc2VydmljZVwiXG5pbXBvcnQgeyBQZXJzb24gfSBmcm9tIFwiLi4vdHlwZXNcIlxuXG5jb25zdCBhZG1pblZpZXcgPSAocGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnQsIGFkbWluOiBQZXJzb24pID0+IHtcbiAgY29uc3QgYWRtaW5TZXJ2aWNlID0gbmV3IFNlcnZpY2UoYWRtaW4uZmlyc3ROYW1lKVxuXG4gIGxldCB4czogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgYW55Pj5bXSA9IFtdXG5cbiAgY29uc3QgZ2V0QWRtaW5NZXNzYWdlcyA9ICgpID0+IHtcbiAgICB4cyA9IGFkbWluTWVkaWF0b3IubWVzc2FnZXNcblxuICAgIHJldHVybiB4c1xuICB9XG5cbiAgY29uc3QgcmVuZGVyID0gKCkgPT4ge1xuICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiYWRtaW4td3JhcHBlciB3cmFwcGVyLSR7YWRtaW5TZXJ2aWNlLm5hbWV9XCI+XG4gICAgICA8YnV0dG9uIGlkPVwiYWRtaW4tcHJvZmlsZS1idG5cIiBjbGFzcz1cImJ1dHRvblwiPkluZm88L2J1dHRvbj5cbiAgICAgIDxkaXYgY2xhc3M9XCJhZG1pbi1jb250ZW50XCI+XG4gICAgICAgIDxoMz4gTXIgQWRtaW4gJHthZG1pblNlcnZpY2UubmFtZX08L2gzPlxuICAgICAgICA8cD4ke2FkbWluU2VydmljZS5uYW1lfTwvcD5cbiAgICAgICAgPHVsIGNsYXNzPVwiYWRtaW4tbWVzc2FnZXMtbGlzdFwiPlxuICAgICAgICAgICR7XG4gICAgICAgICAgICB4cy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgID8geHMubWFwKHggPT4gYCA8bGk+JHt4Lm1lc3NhZ2V9PC9saT4gYCkuam9pbihcIlwiKVxuICAgICAgICAgICAgICA6IGA8cD5ObyByZWdpc3RlcmVkIHN0dWRlbnRzIFlFVCE8L3A+YFxuICAgICAgICAgIH1cbiAgICAgICAgPC91bD5cbiAgICAgICAgPC9kaXY+XG5cbiAgICA8L2Rpdj5cbiAgICAgIGBcblxuICAgIHBhcmVudEVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbFxuICAgIGdldEFkbWluTWVzc2FnZXMoKVxuXG4gICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZG1pbi1wcm9maWxlLWJ0blwiKVxuXG4gICAgYnRuPy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgZ2V0QWRtaW5NZXNzYWdlcygpXG4gICAgICBpbml0KClcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICByZW5kZXIoKVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0LFxuICB9XG59XG5cbmV4cG9ydCB7IGFkbWluVmlldyB9XG4iXSwic291cmNlUm9vdCI6IiJ9